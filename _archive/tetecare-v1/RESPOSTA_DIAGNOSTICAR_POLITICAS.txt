Perfeito! Vamos diagnosticar primeiro para entender o que está acontecendo.

**CONFIRMAÇÃO: Execute a Opção 2 (diagnóstico completo).**

Por favor, execute a query de diagnóstico para obter informações detalhadas sobre as políticas:

```sql
SELECT 
  p.polname as policy_name,
  p.polrelid::regclass as table_name,
  r.rolname as policy_owner,
  p.oid as policy_oid,
  pg_get_expr(p.qual, p.polrelid) as stored_using_expression,
  pg_get_expr(p.polwithcheck, p.polrelid) as stored_with_check_expression,
  p.polcmd as operation,
  p.polpermissive as is_permissive
FROM pg_policy p
JOIN pg_class c ON c.oid = p.polrelid
JOIN pg_roles r ON r.oid = p.polowner
WHERE c.relname = 'objects'
  AND c.relnamespace = 'storage'::regnamespace
  AND p.polname IN (
    'staff_policy_select',
    'tutors_policy_select',
    'tutors_policy_insert',
    'tutors_policy_update'
  )
ORDER BY p.polname, p.polcmd;
```

**Informações que preciso:**

1. **Policy Owner (rolname):** Qual role é o owner das políticas?
   - Se for `supabase_admin` ou outro role, isso explica por que o DROP não funcionou

2. **Stored Expressions (pg_get_expr):** Qual é a expressão exatamente como está armazenada?
   - Isso mostrará se realmente contém `users.name` ou se é apenas como está sendo exibido

3. **Policy OID:** Identificador único de cada política
   - Útil para usar ALTER POLICY se necessário

4. **Número de políticas:** Há políticas duplicadas com o mesmo nome?

**Após receber os resultados, vou:**
- Se as políticas são de outro owner: Fornecer instruções para executar como o owner correto
- Se as expressões estão corretas mas exibidas incorretamente: Usar ALTER POLICY para forçar atualização
- Se há duplicatas: Remover as antigas e criar novas

Pode prosseguir com o diagnóstico?


