import{r as u,t as v,j as e,B as z,a as w,C as a,f as r,n as j,I as E,b as n,d,ae as y,e as H}from"./index-DG0yx2hi.js";import{A as O}from"./AdminLayout-CapzJ-JK.js";import{F as C,B as o}from"./popover-Bqiz4euq.js";import{d as P,a as Q}from"./exportUtils-C-Anx_Ql.js";import{S as k}from"./SearchAndFilter-CyeyrFac.js";import{D as R}from"./download-DIpAs7NP.js";import{B as S}from"./building-2-hE8cORrW.js";import"./scroll-area-C0S6gB82.js";import"./index-BdQq_4o_.js";import"./layout-dashboard-CC4g-mOh.js";import"./wallet-CKmMh37E.js";import"./users-DD1qYPM2.js";import"./user-B4BzRHVK.js";import"./select-k5kl2mY3.js";import"./index-r4-iOF84.js";import"./chevron-down-CKVtRMqG.js";import"./check-DDByOptX.js";import"./search-DtaYG9vz.js";import"./filter-C966fxzX.js";function ie(){const[p,f]=u.useState(""),[c,g]=u.useState("all"),[m,N]=u.useState("all"),[x,b]=u.useState(""),{data:h}=v.pets.list.useQuery(),{data:D,isLoading:F}=v.logs.list.useQuery(c!=="all"?{petId:Number(c)}:void 0),t=D?.filter(s=>{const l=h?.find(A=>A.id===s.petId),i=!p||l?.name.toLowerCase().includes(p.toLowerCase()),I=m==="all"||s.source===m,T=!x||new Date(s.logDate).toISOString().split("T")[0]===x;return i&&I&&T}),L=s=>{switch(s){case"feliz":return"üòä";case"calmo":return"üòå";case"ansioso":return"üò∞";case"triste":return"üò¢";case"agitado":return"üò§";default:return"üòê"}},B=s=>{switch(s){case"normal":return e.jsx(o,{className:"bg-green-100 text-green-700 border-green-200",children:"Normal"});case"diarreia":return e.jsx(o,{className:"bg-red-100 text-red-700 border-red-200",children:"Diarreia"});case"constipado":return e.jsx(o,{className:"bg-yellow-100 text-yellow-700 border-yellow-200",children:"Constipado"});case"nao_fez":return e.jsx(o,{variant:"outline",children:"N√£o fez"});default:return null}};return e.jsx(O,{children:e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Logs Di√°rios"}),e.jsx("p",{className:"text-muted-foreground",children:"Hist√≥rico completo de registros di√°rios dos pets"})]}),e.jsxs(z,{variant:"outline",onClick:()=>{if(!t||t.length===0){w.error("Nenhum log para exportar");return}P(Q(t,h||[]),`logs_${new Date().toISOString().split("T")[0]}`),w.success("Logs exportados com sucesso!")},children:[e.jsx(R,{className:"mr-2 h-4 w-4"}),"Exportar CSV"]})]}),e.jsx(a,{children:e.jsxs(r,{className:"pt-6 space-y-4",children:[e.jsx(k,{searchPlaceholder:"Buscar por nome do pet...",searchValue:p,onSearchChange:f,filters:[{label:"Pet",value:c,options:[{label:"Todos os pets",value:"all"},...h?.map(s=>({label:s.name,value:s.id.toString()}))||[]],onChange:g},{label:"Origem",value:m,options:[{label:"Todos",value:"all"},{label:"Casa",value:"home"},{label:"Creche",value:"daycare"}],onChange:N}],onClearFilters:()=>{f(""),g("all"),N("all"),b("")}}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(E,{type:"date",value:x,onChange:s=>b(s.target.value),className:"w-auto",placeholder:"Filtrar por data"})]})]})}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsxs(a,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Total de Logs"}),e.jsx(C,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(r,{children:e.jsx("div",{className:"text-2xl font-bold",children:t?.length||0})})]}),e.jsxs(a,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Casa"}),e.jsx(y,{className:"h-4 w-4 text-blue-500"})]}),e.jsx(r,{children:e.jsx("div",{className:"text-2xl font-bold",children:t?.filter(s=>s.source==="home").length||0})})]}),e.jsxs(a,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Creche"}),e.jsx(S,{className:"h-4 w-4 text-orange-500"})]}),e.jsx(r,{children:e.jsx("div",{className:"text-2xl font-bold",children:t?.filter(s=>s.source==="daycare").length||0})})]}),e.jsxs(a,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Hoje"}),e.jsx(j,{className:"h-4 w-4 text-green-500"})]}),e.jsx(r,{children:e.jsx("div",{className:"text-2xl font-bold",children:t?.filter(s=>{const l=new Date(s.logDate).toDateString(),i=new Date().toDateString();return l===i}).length||0})})]})]}),e.jsxs(a,{children:[e.jsxs(n,{children:[e.jsx(d,{children:"Registros"}),e.jsxs(H,{children:[t?.length||0," logs encontrados"]})]}),e.jsx(r,{children:F?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):!t||t.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx(C,{className:"empty-state-icon"}),e.jsx("p",{className:"empty-state-title",children:"Nenhum log encontrado"}),e.jsx("p",{className:"empty-state-description",children:c||m!=="all"||x?"Tente ajustar os filtros":"Os logs di√°rios aparecer√£o aqui"})]}):e.jsx("div",{className:"space-y-4",children:t.map(s=>{const l=h?.find(i=>i.id===s.petId);return e.jsxs("div",{className:"p-4 border rounded-lg space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-3xl",children:L(s.mood||void 0)}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:l?.name}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(j,{className:"h-4 w-4"}),new Date(s.logDate).toLocaleDateString("pt-BR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})]})]}),e.jsx(o,{variant:"outline",className:s.source==="home"?"bg-blue-50 text-blue-700 border-blue-200":"bg-orange-50 text-orange-700 border-orange-200",children:s.source==="home"?e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"mr-1 h-3 w-3"}),"Casa"]}):e.jsxs(e.Fragment,{children:[e.jsx(S,{className:"mr-1 h-3 w-3"}),"Creche"]})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[s.mood&&e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Humor"}),e.jsx("p",{className:"font-medium capitalize",children:s.mood})]}),s.stool&&e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground mb-1",children:"Fezes"}),B(s.stool)]}),s.appetite&&e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Apetite"}),e.jsx("p",{className:"font-medium capitalize",children:s.appetite})]}),s.foodConsumed&&e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Alimenta√ß√£o"}),e.jsx("p",{className:"font-medium",children:s.foodConsumed})]})]}),s.behavior&&e.jsxs("div",{className:"p-3 bg-muted/30 rounded",children:[e.jsx("p",{className:"text-sm font-medium mb-1",children:"Comportamento"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.behavior})]}),s.activities&&e.jsxs("div",{className:"p-3 bg-muted/30 rounded",children:[e.jsx("p",{className:"text-sm font-medium mb-1",children:"Atividades"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.activities})]}),s.notes&&e.jsxs("div",{className:"p-3 bg-blue-50/50 border border-blue-200 rounded",children:[e.jsx("p",{className:"text-sm font-medium mb-1",children:"Observa√ß√µes"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.notes})]})]},s.id)})})})]})]})})}export{ie as default};
