import{m as H,u as V,r as x,t as u,a as l,j as e,o as A,A as B,B as d,p as F,q as E,s as S,v as k,h as t,I as i,w as M,C as I,f as R,D as z,b as W,d as J,e as X,n as K,aD as Y}from"./index-DG0yx2hi.js";import{T as N}from"./TutorLayout-lMG2oLBz.js";import{B as v}from"./popover-Bqiz4euq.js";import{T}from"./textarea-BfRN5q_Y.js";import{C as Z}from"./camera-Br2FVmP9.js";import{A as _}from"./activity-DL-_hozy.js";import{C as ee}from"./circle-x-Ewhe70CR.js";import{C as ae}from"./clock-BQzFMz2h.js";import{C as se}from"./circle-check-big-DKLrYCYd.js";import"./NotificationBell-BIuiN9Fe.js";import"./pt-BR-BIS3WgEC.js";import"./info-DReA-lTp.js";import"./message-square-COhalQ2E.js";import"./chart-column-B4FPjduw.js";import"./package-CC5WVNv6.js";import"./user-B4BzRHVK.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b=H("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);function fe(){const[,L]=V(),[y,n]=x.useState(!1),[s,r]=x.useState({name:"",breed:"",age:"",weight:"",birthDate:"",foodBrand:"",foodAmount:"",notes:""}),[g,p]=x.useState(null),[w,m]=x.useState(null),[j,C]=x.useState(null),P=u.useUtils(),{data:f,isLoading:G}=u.pets.listMine.useQuery(),h=u.pets.create.useMutation({onSuccess:async a=>{if(g&&a.id)try{const o=new FileReader;o.onloadend=async()=>{const c=o.result?.toString().split(",")[1];c&&await O.mutateAsync({petId:a.id,fileName:g.name,fileContent:c,mimeType:g.type})},o.readAsDataURL(g)}catch(o){console.error("Erro ao fazer upload da foto:",o)}l.success("Pet cadastrado com sucesso! Aguardando aprovação da creche."),n(!1),r({name:"",breed:"",age:"",weight:"",birthDate:"",foodBrand:"",foodAmount:"",notes:""}),p(null),m(null),P.pets.listMine.invalidate()},onError:a=>{l.error(`Erro ao cadastrar pet: ${a.message}`)}}),O=u.pets.uploadPhoto.useMutation(),q=u.pets.updateMine.useMutation({onSuccess:()=>{l.success("Pet atualizado com sucesso! Aguardando nova aprovação."),n(!1),C(null),r({name:"",breed:"",age:"",weight:"",birthDate:"",foodBrand:"",foodAmount:"",notes:""}),p(null),m(null),P.pets.listMine.invalidate()},onError:a=>{l.error(`Erro ao atualizar pet: ${a.message}`)}}),U=a=>{C(a),r({name:a.name,breed:a.breed||"",age:a.age||"",weight:a.weight?(a.weight/1e3).toString():"",birthDate:a.birthDate?new Date(a.birthDate).toISOString().split("T")[0]:"",foodBrand:a.foodBrand||"",foodAmount:a.foodAmount?a.foodAmount.toString():"",notes:a.notes||""}),m(a.photoUrl||null),n(!0)},Q=a=>{const o=a.target.files?.[0];if(o){if(o.size>5*1024*1024){l.error("Arquivo muito grande. Máximo 5MB.");return}if(!o.type.startsWith("image/")){l.error("Apenas imagens são permitidas.");return}p(o);const c=new FileReader;c.onloadend=()=>{m(c.result)},c.readAsDataURL(o)}},D=a=>{if(a.preventDefault(),!s.name.trim()){l.error("Nome do pet é obrigatório");return}j?q.mutate({id:j.id,name:s.name,breed:s.breed||void 0,age:s.age||void 0,weight:s.weight?parseInt(s.weight)*1e3:void 0,birthDate:s.birthDate||void 0,foodBrand:s.foodBrand||void 0,foodAmount:s.foodAmount?parseInt(s.foodAmount):void 0,notes:s.notes||void 0}):h.mutate({name:s.name,breed:s.breed||void 0,age:s.age||void 0,weight:s.weight?parseInt(s.weight)*1e3:void 0,birthDate:s.birthDate||void 0,foodBrand:s.foodBrand||void 0,foodAmount:s.foodAmount?parseInt(s.foodAmount):void 0,notes:s.notes||void 0})},$=a=>{switch(a){case"approved":return e.jsxs(v,{className:"bg-green-500/10 text-green-700 border-green-500/20",children:[e.jsx(se,{className:"h-3 w-3 mr-1"}),"Aprovado"]});case"pending":return e.jsxs(v,{className:"bg-yellow-500/10 text-yellow-700 border-yellow-500/20",children:[e.jsx(ae,{className:"h-3 w-3 mr-1"}),"Aguardando"]});case"rejected":return e.jsxs(v,{className:"bg-red-500/10 text-red-700 border-red-500/20",children:[e.jsx(ee,{className:"h-3 w-3 mr-1"}),"Rejeitado"]});default:return null}};return G?e.jsx(N,{children:e.jsx("div",{className:"container max-w-7xl py-8 space-y-8 animate-fade-in",children:e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-muted-foreground",children:"Carregando seus pets..."})})})}):!f||f.length===0?e.jsx(N,{children:e.jsxs("div",{className:"container max-w-7xl py-8 space-y-8 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Meus Pets"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Cadastre seus pets para utilizar os serviços da creche"})]}),e.jsxs(A,{open:y,onOpenChange:n,children:[e.jsx(B,{asChild:!0,children:e.jsxs(d,{size:"lg",className:"gap-2",children:[e.jsx(b,{className:"h-5 w-5"}),"Cadastrar Pet"]})}),e.jsxs(F,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(E,{children:[e.jsx(S,{children:j?"Editar Pet":"Cadastrar Novo Pet"}),e.jsx(k,{children:j?"Atualize as informações do seu pet. Após a edição, o pet será submetido para nova aprovação.":"Preencha as informações do seu pet. Após o cadastro, aguarde a aprovação da creche."})]}),e.jsxs("form",{onSubmit:D,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"photo",children:"Foto do Pet"}),e.jsxs("div",{className:"flex items-center gap-4",children:[w?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:w,alt:"Preview",className:"h-24 w-24 rounded-full object-cover border-2 border-border"}),e.jsx(d,{type:"button",variant:"destructive",size:"sm",className:"absolute -top-2 -right-2 h-6 w-6 rounded-full p-0",onClick:()=>{p(null),m(null)},children:"×"})]}):e.jsx("div",{className:"h-24 w-24 rounded-full bg-muted flex items-center justify-center",children:e.jsx(Z,{className:"h-8 w-8 text-muted-foreground"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx(i,{id:"photo",type:"file",accept:"image/*",onChange:Q,className:"cursor-pointer"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"M\\u00e1ximo 5MB. Formatos: JPG, PNG, WEBP"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"name",children:"Nome do Pet *"}),e.jsx(i,{id:"name",placeholder:"Ex: Rex",value:s.name,onChange:a=>r({...s,name:a.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"breed",children:"Raça"}),e.jsx(i,{id:"breed",placeholder:"Ex: Golden Retriever",value:s.breed,onChange:a=>r({...s,breed:a.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"age",children:"Idade"}),e.jsx(i,{id:"age",placeholder:"Ex: 2 anos 3 meses",value:s.age,onChange:a=>r({...s,age:a.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"birthDate",children:"Data de Nascimento"}),e.jsx(i,{id:"birthDate",type:"date",value:s.birthDate,onChange:a=>r({...s,birthDate:a.target.value})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"weight",children:"Peso (kg)"}),e.jsx(i,{id:"weight",type:"number",step:"0.1",placeholder:"Ex: 32.5",value:s.weight,onChange:a=>r({...s,weight:a.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"foodBrand",children:"Marca da Ração"}),e.jsx(i,{id:"foodBrand",placeholder:"Ex: Premier Golden",value:s.foodBrand,onChange:a=>r({...s,foodBrand:a.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"foodAmount",children:"Quantidade Diária (g)"}),e.jsx(i,{id:"foodAmount",type:"number",placeholder:"Ex: 300",value:s.foodAmount,onChange:a=>r({...s,foodAmount:a.target.value})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"notes",children:"Observações"}),e.jsx(T,{id:"notes",placeholder:"Informações adicionais sobre o pet",value:s.notes,onChange:a=>r({...s,notes:a.target.value}),rows:4})]}),e.jsxs(M,{children:[e.jsx(d,{type:"button",variant:"outline",onClick:()=>n(!1),children:"Cancelar"}),e.jsx(d,{type:"submit",disabled:h.isPending,children:h.isPending?"Cadastrando...":"Cadastrar Pet"})]})]})]})]})]}),e.jsx(I,{children:e.jsxs(R,{className:"empty-state",children:[e.jsx(z,{className:"empty-state-icon"}),e.jsx("p",{className:"empty-state-title",children:"Nenhum pet cadastrado"}),e.jsx("p",{className:"empty-state-description",children:"Cadastre seu primeiro pet para começar a utilizar os serviços da creche"}),e.jsxs(d,{onClick:()=>n(!0),className:"gap-2 mt-4",children:[e.jsx(b,{className:"h-5 w-5"}),"Cadastrar Primeiro Pet"]})]})})]})}):e.jsx(N,{children:e.jsxs("div",{className:"container max-w-7xl py-8 space-y-8 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Meus Pets"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Gerencie e acompanhe a saúde dos seus pets"})]}),e.jsxs(A,{open:y,onOpenChange:n,children:[e.jsx(B,{asChild:!0,children:e.jsxs(d,{size:"lg",className:"gap-2",children:[e.jsx(b,{className:"h-5 w-5"}),"Cadastrar Pet"]})}),e.jsxs(F,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(E,{children:[e.jsx(S,{children:"Cadastrar Novo Pet"}),e.jsx(k,{children:"Preencha as informações do seu pet. Após o cadastro, aguarde a aprovação da creche."})]}),e.jsxs("form",{onSubmit:D,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"name",children:"Nome do Pet *"}),e.jsx(i,{id:"name",placeholder:"Ex: Rex",value:s.name,onChange:a=>r({...s,name:a.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"breed",children:"Raça"}),e.jsx(i,{id:"breed",placeholder:"Ex: Golden Retriever",value:s.breed,onChange:a=>r({...s,breed:a.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"age",children:"Idade"}),e.jsx(i,{id:"age",placeholder:"Ex: 2 anos 3 meses",value:s.age,onChange:a=>r({...s,age:a.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"birthDate",children:"Data de Nascimento"}),e.jsx(i,{id:"birthDate",type:"date",value:s.birthDate,onChange:a=>r({...s,birthDate:a.target.value})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"weight",children:"Peso (kg)"}),e.jsx(i,{id:"weight",type:"number",step:"0.1",placeholder:"Ex: 32.5",value:s.weight,onChange:a=>r({...s,weight:a.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"foodBrand",children:"Marca da Ração"}),e.jsx(i,{id:"foodBrand",placeholder:"Ex: Premier Golden",value:s.foodBrand,onChange:a=>r({...s,foodBrand:a.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"foodAmount",children:"Quantidade Diária (g)"}),e.jsx(i,{id:"foodAmount",type:"number",placeholder:"Ex: 300",value:s.foodAmount,onChange:a=>r({...s,foodAmount:a.target.value})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"notes",children:"Observações"}),e.jsx(T,{id:"notes",placeholder:"Informações adicionais sobre o pet",value:s.notes,onChange:a=>r({...s,notes:a.target.value}),rows:4})]}),e.jsxs(M,{children:[e.jsx(d,{type:"button",variant:"outline",onClick:()=>n(!1),children:"Cancelar"}),e.jsx(d,{type:"submit",disabled:h.isPending,children:h.isPending?"Cadastrando...":"Cadastrar Pet"})]})]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:f.map(a=>e.jsxs(I,{className:"hover-lift cursor-pointer",onClick:()=>L(`/tutor/pets/${a.id}`),children:[e.jsx(W,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(z,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{children:[e.jsx(J,{children:a.name}),e.jsx(X,{children:a.breed})]})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[a.status==="checked-in"&&e.jsx(v,{variant:"default",className:"bg-green-500",children:"Na Creche"}),$(a.approvalStatus)]})]})}),e.jsxs(R,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Idade"}),e.jsxs("p",{className:"font-medium",children:[a.age," anos"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Peso"}),e.jsxs("p",{className:"font-medium",children:[a.weight," kg"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(K,{className:"h-4 w-4"}),e.jsx("span",{children:"Vacinas"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(_,{className:"h-4 w-4"}),e.jsx("span",{children:"Logs"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[(a.approvalStatus==="pending"||a.approvalStatus==="rejected")&&e.jsx(d,{variant:"outline",size:"sm",onClick:o=>{o.stopPropagation(),U(a)},children:"Editar"}),e.jsxs(d,{variant:"ghost",size:"sm",children:["Ver detalhes",e.jsx(Y,{className:"ml-2 h-4 w-4"})]})]})]})]})]},a.id))})]})})}export{fe as default};
