import{r as m,t as o,a as x,j as e,o as P,A as M,B as h,p as E,q as L,s as O,v as B,h as i,I as j,C as n,b as d,d as c,f as l,n as se,e as u}from"./index-DG0yx2hi.js";import{A as ae}from"./AdminLayout-CapzJ-JK.js";import{S as p,a as g,b as v,c as f,d as a}from"./select-k5kl2mY3.js";import{T as te,a as re,b as y,c as N}from"./tabs-sUy1g-fW.js";import{A as q,a as $,P as ie}from"./PaymentHistory-BXC4X_EU.js";import{P as V}from"./plus-DIKUpKHa.js";import{D as ne}from"./layout-dashboard-CC4g-mOh.js";import{T as de}from"./trending-up-C2VanZIM.js";import{C as ce}from"./credit-card-CxD7Buqp.js";import{R as k,L as le,C as H,X as K,Y as Q,T as U,a as oe,B as me}from"./LineChart-CD6pLqis.js";import{B as xe}from"./BarChart-C1UGB1Aa.js";import"./popover-Bqiz4euq.js";import"./scroll-area-C0S6gB82.js";import"./index-BdQq_4o_.js";import"./wallet-CKmMh37E.js";import"./users-DD1qYPM2.js";import"./user-B4BzRHVK.js";import"./index-r4-iOF84.js";import"./chevron-down-CKVtRMqG.js";import"./check-DDByOptX.js";import"./table-DeOYaLOA.js";import"./circle-x-Ewhe70CR.js";import"./clock-BQzFMz2h.js";import"./pt-BR-BIS3WgEC.js";import"./findIndex-Ckvz6Jh7.js";function Ve(){const[z,A]=m.useState(!1),[G,F]=m.useState(!1),[he,je]=m.useState(""),[I,J]=m.useState("income"),{data:C}=o.pets.list.useQuery(),{data:b}=o.credits.getTransactions.useQuery(),{data:t}=o.credits.getStats.useQuery(),w=o.credits.add.useMutation({onSuccess:()=>{x.success("Créditos adicionados com sucesso!"),A(!1)},onError:s=>{x.error(s.message)}}),D=o.credits.addTransaction.useMutation({onSuccess:()=>{x.success("Transação registrada com sucesso!"),F(!1)},onError:s=>{x.error(s.message)}}),W=s=>{s.preventDefault();const r=new FormData(s.currentTarget),T=parseInt(r.get("petId")),S=parseFloat(r.get("amount")),R=r.get("description");w.mutate({petId:T,amount:S,description:R})},X=s=>{s.preventDefault();const r=new FormData(s.currentTarget),T=r.get("petId")?parseInt(r.get("petId")):void 0,S=parseFloat(r.get("amount")),R=r.get("type"),_=r.get("category"),ee=r.get("description");D.mutate({petId:T,amount:S,type:R,category:_,description:ee})},Y=[{month:"Jan",revenue:12500},{month:"Fev",revenue:15200},{month:"Mar",revenue:18900},{month:"Abr",revenue:16700},{month:"Mai",revenue:21300},{month:"Jun",revenue:19800}],Z=[{category:"Ração",amount:4500},{category:"Medicamentos",amount:2300},{category:"Limpeza",amount:1800},{category:"Salários",amount:8500},{category:"Outros",amount:1200}];return e.jsx(ae,{children:e.jsxs("div",{className:"space-y-8 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Finanças"}),e.jsx("p",{className:"text-muted-foreground",children:"Controle financeiro e gestão de créditos"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(P,{open:z,onOpenChange:A,children:[e.jsx(M,{asChild:!0,children:e.jsxs(h,{children:[e.jsx(V,{className:"mr-2 h-4 w-4"}),"Adicionar Créditos"]})}),e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsx(O,{children:"Adicionar Créditos"}),e.jsx(B,{children:"Adicione créditos de creche para um pet"})]}),e.jsxs("form",{onSubmit:W,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"petId",children:"Pet *"}),e.jsxs(p,{name:"petId",required:!0,children:[e.jsx(g,{children:e.jsx(v,{placeholder:"Selecione o pet"})}),e.jsx(f,{children:C?.map(s=>e.jsx(a,{value:s.id.toString(),children:s.name},s.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"amount",children:"Quantidade de Créditos *"}),e.jsx(j,{id:"amount",name:"amount",type:"number",step:"0.5",min:"0.5",placeholder:"Ex: 10",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"description",children:"Descrição"}),e.jsx(j,{id:"description",name:"description",placeholder:"Ex: Pacote mensal"})]}),e.jsx(h,{type:"submit",className:"w-full",disabled:w.isPending,children:w.isPending?"Adicionando...":"Adicionar Créditos"})]})]})]}),e.jsxs(P,{open:G,onOpenChange:F,children:[e.jsx(M,{asChild:!0,children:e.jsxs(h,{variant:"outline",children:[e.jsx(V,{className:"mr-2 h-4 w-4"}),"Nova Transação"]})}),e.jsxs(E,{children:[e.jsxs(L,{children:[e.jsx(O,{children:"Nova Transação"}),e.jsx(B,{children:"Registre uma receita ou despesa"})]}),e.jsxs("form",{onSubmit:X,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"type",children:"Tipo *"}),e.jsxs(p,{name:"type",value:I,onValueChange:J,required:!0,children:[e.jsx(g,{children:e.jsx(v,{placeholder:"Selecione o tipo"})}),e.jsxs(f,{children:[e.jsx(a,{value:"income",children:"Receita"}),e.jsx(a,{value:"expense",children:"Despesa"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"category",children:"Categoria *"}),e.jsxs(p,{name:"category",required:!0,children:[e.jsx(g,{children:e.jsx(v,{placeholder:"Selecione a categoria"})}),e.jsx(f,{children:I==="income"?e.jsxs(e.Fragment,{children:[e.jsx(a,{value:"daycare",children:"Creche"}),e.jsx(a,{value:"credits",children:"Créditos"}),e.jsx(a,{value:"services",children:"Serviços"}),e.jsx(a,{value:"other",children:"Outros"})]}):e.jsxs(e.Fragment,{children:[e.jsx(a,{value:"food",children:"Ração"}),e.jsx(a,{value:"medication",children:"Medicamentos"}),e.jsx(a,{value:"cleaning",children:"Limpeza"}),e.jsx(a,{value:"salary",children:"Salários"}),e.jsx(a,{value:"maintenance",children:"Manutenção"}),e.jsx(a,{value:"other",children:"Outros"})]})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"amount",children:"Valor (R$) *"}),e.jsx(j,{id:"amount",name:"amount",type:"number",step:"0.01",min:"0.01",placeholder:"Ex: 150.00",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"petId",children:"Pet (opcional)"}),e.jsxs(p,{name:"petId",children:[e.jsx(g,{children:e.jsx(v,{placeholder:"Selecione o pet (se aplicável)"})}),e.jsx(f,{children:C?.map(s=>e.jsx(a,{value:s.id.toString(),children:s.name},s.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"description",children:"Descrição *"}),e.jsx(j,{id:"description",name:"description",placeholder:"Descreva a transação",required:!0})]}),e.jsx(h,{type:"submit",className:"w-full",disabled:D.isPending,children:D.isPending?"Registrando...":"Registrar Transação"})]})]})]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(n,{children:[e.jsxs(d,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(c,{className:"text-sm font-medium",children:"Receita Mensal"}),e.jsx(ne,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(l,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["R$ ",t?.monthlyRevenue?.toFixed(2)||"0.00"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:e.jsxs("span",{className:"text-green-600 flex items-center gap-1",children:[e.jsx(q,{className:"h-3 w-3"}),"+12.5% vs mês anterior"]})})]})]}),e.jsxs(n,{children:[e.jsxs(d,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(c,{className:"text-sm font-medium",children:"Despesas Mensais"}),e.jsx(de,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(l,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["R$ ",t?.monthlyExpenses?.toFixed(2)||"0.00"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:e.jsxs("span",{className:"text-red-600 flex items-center gap-1",children:[e.jsx($,{className:"h-3 w-3"}),"-3.2% vs mês anterior"]})})]})]}),e.jsxs(n,{children:[e.jsxs(d,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(c,{className:"text-sm font-medium",children:"Lucro Mensal"}),e.jsx(ce,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(l,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["R$ ",((t?.monthlyRevenue||0)-(t?.monthlyExpenses||0)).toFixed(2)]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Margem: ",t?.monthlyRevenue?((t.monthlyRevenue-(t.monthlyExpenses||0))/t.monthlyRevenue*100).toFixed(1):0,"%"]})]})]}),e.jsxs(n,{children:[e.jsxs(d,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(c,{className:"text-sm font-medium",children:"Créditos Ativos"}),e.jsx(se,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(l,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t?.totalActiveCredits||0}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Em ",t?.petsWithCredits||0," pets"]})]})]})]}),e.jsxs(te,{defaultValue:"overview",className:"space-y-4",children:[e.jsxs(re,{children:[e.jsx(y,{value:"overview",children:"Visão Geral"}),e.jsx(y,{value:"transactions",children:"Transações"}),e.jsx(y,{value:"credits",children:"Créditos"}),e.jsx(y,{value:"payments",children:"Pagamentos Stripe"})]}),e.jsx(N,{value:"overview",className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(n,{children:[e.jsxs(d,{children:[e.jsx(c,{children:"Receita Mensal"}),e.jsx(u,{children:"Últimos 6 meses"})]}),e.jsx(l,{children:e.jsx(k,{width:"100%",height:300,children:e.jsxs(le,{data:Y,children:[e.jsx(H,{strokeDasharray:"3 3"}),e.jsx(K,{dataKey:"month"}),e.jsx(Q,{}),e.jsx(U,{}),e.jsx(oe,{type:"monotone",dataKey:"revenue",stroke:"hsl(var(--primary))",strokeWidth:2})]})})})]}),e.jsxs(n,{children:[e.jsxs(d,{children:[e.jsx(c,{children:"Despesas por Categoria"}),e.jsx(u,{children:"Mês atual"})]}),e.jsx(l,{children:e.jsx(k,{width:"100%",height:300,children:e.jsxs(xe,{data:Z,children:[e.jsx(H,{strokeDasharray:"3 3"}),e.jsx(K,{dataKey:"category"}),e.jsx(Q,{}),e.jsx(U,{}),e.jsx(me,{dataKey:"amount",fill:"hsl(var(--primary))"})]})})})]})]})}),e.jsx(N,{value:"transactions",className:"space-y-4",children:e.jsxs(n,{children:[e.jsxs(d,{children:[e.jsx(c,{children:"Transações Recentes"}),e.jsx(u,{children:"Histórico de receitas e despesas"})]}),e.jsx(l,{children:e.jsx("div",{className:"space-y-4",children:b&&b.length>0?b.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${s.type==="income"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:s.type==="income"?e.jsx(q,{className:"h-5 w-5"}):e.jsx($,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.description}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.category," • ",new Date(s.createdAt).toLocaleDateString("pt-BR")]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:`font-bold ${s.type==="income"?"text-green-600":"text-red-600"}`,children:[s.type==="income"?"+":"-","R$ ",s.amount.toFixed(2)]}),s.petName&&e.jsx("p",{className:"text-sm text-muted-foreground",children:s.petName})]})]},s.id)):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Nenhuma transação registrada"})})})]})}),e.jsx(N,{value:"credits",className:"space-y-4",children:e.jsxs(n,{children:[e.jsxs(d,{children:[e.jsx(c,{children:"Créditos por Pet"}),e.jsx(u,{children:"Saldo de créditos de creche"})]}),e.jsx(l,{children:e.jsx("div",{className:"space-y-4",children:C?.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[s.photoUrl?e.jsx("img",{src:s.photoUrl,alt:s.name,className:"w-12 h-12 rounded-full object-cover"}):e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-accent flex items-center justify-center text-white font-bold",children:s.name[0]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.breed})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-2xl font-bold",children:s.credits||0}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"créditos"})]})]},s.id))})})]})}),e.jsx(N,{value:"payments",className:"space-y-4",children:e.jsx(ie,{})})]})]})})}export{Ve as default};
