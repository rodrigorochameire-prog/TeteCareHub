import{k as A,t as l,r as N,a as r,j as e,C as u,b as x,d as p,e as f,S as M,f as j,c as D,i as E,B as w,l as P,h as i,I as t}from"./index-DG0yx2hi.js";import{A as F,S as L}from"./AdminLayout-CapzJ-JK.js";import{B as g}from"./popover-Bqiz4euq.js";import{T as q}from"./TutorLayout-lMG2oLBz.js";import{U as V}from"./user-B4BzRHVK.js";import{M as k}from"./mail-DVbdA7bp.js";import{P as B}from"./phone-DTR97RUp.js";import{K as T}from"./key-round-B6ymMUey.js";import"./scroll-area-C0S6gB82.js";import"./index-BdQq_4o_.js";import"./layout-dashboard-CC4g-mOh.js";import"./wallet-CKmMh37E.js";import"./users-DD1qYPM2.js";import"./NotificationBell-BIuiN9Fe.js";import"./pt-BR-BIS3WgEC.js";import"./info-DReA-lTp.js";import"./message-square-COhalQ2E.js";import"./chart-column-B4FPjduw.js";import"./package-CC5WVNv6.js";function re(){const{user:n}=A(),y=l.useUtils(),[o,v]=N.useState({name:n?.name||"",phone:n?.phone||""}),[a,d]=N.useState({oldPassword:"",newPassword:"",confirmPassword:""}),c=l.auth.updateProfile.useMutation({onSuccess:()=>{r.success("Perfil atualizado com sucesso!"),y.auth.me.invalidate()},onError:s=>{r.error(s.message)}}),m=l.auth.changePassword.useMutation({onSuccess:()=>{r.success("Senha alterada com sucesso!"),d({oldPassword:"",newPassword:"",confirmPassword:""})},onError:s=>{r.error(s.message)}}),h=l.auth.requestEmailVerification.useMutation({onSuccess:()=>{r.success("Email de verificação enviado! Verifique sua caixa de entrada.")},onError:s=>{r.error(s.message)}}),C=s=>{s.preventDefault(),c.mutate(o)},S=s=>{if(s.preventDefault(),a.newPassword.length<6){r.error("A nova senha deve ter no mínimo 6 caracteres.");return}if(a.newPassword!==a.confirmPassword){r.error("As senhas não conferem.");return}m.mutate({oldPassword:a.oldPassword,newPassword:a.newPassword})},b=n?.role==="admin"?F:q;return e.jsx(b,{children:e.jsxs("div",{className:"container max-w-4xl py-8 space-y-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Meu Perfil"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Gerencie suas informações pessoais e configurações de segurança"})]}),e.jsxs(u,{children:[e.jsx(x,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(p,{className:"flex items-center gap-2",children:[e.jsx(V,{className:"h-5 w-5"}),"Informações da Conta"]}),e.jsx(f,{children:"Seus dados básicos e status de verificação"})]}),n?.role==="admin"&&e.jsxs(g,{variant:"default",className:"gap-1",children:[e.jsx(M,{className:"h-3 w-3"}),"Administrador"]})]})}),e.jsx(j,{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center gap-3 p-4 rounded-lg bg-muted/50",children:[e.jsx(k,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"Email"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:n?.email})]}),n?.emailVerified?e.jsxs(g,{variant:"default",className:"gap-1",children:[e.jsx(D,{className:"h-3 w-3"}),"Verificado"]}):e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsxs(g,{variant:"secondary",className:"gap-1",children:[e.jsx(E,{className:"h-3 w-3"}),"Não verificado"]}),e.jsx(w,{size:"sm",variant:"outline",onClick:()=>h.mutate(),disabled:h.isPending,children:h.isPending?e.jsxs(e.Fragment,{children:[e.jsx(P,{className:"mr-2 h-3 w-3 animate-spin"}),"Enviando..."]}):"Verificar email"})]})]})})]}),e.jsxs(u,{children:[e.jsxs(x,{children:[e.jsx(p,{children:"Dados Pessoais"}),e.jsx(f,{children:"Atualize suas informações de contato"})]}),e.jsx(j,{children:e.jsxs("form",{onSubmit:C,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"name",children:"Nome completo"}),e.jsx(t,{id:"name",value:o.name,onChange:s=>v({...o,name:s.target.value}),placeholder:"Seu nome"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"phone",children:"Telefone"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(t,{id:"phone",value:o.phone,onChange:s=>v({...o,phone:s.target.value}),placeholder:"(00) 00000-0000"})]})]}),e.jsx(w,{type:"submit",disabled:c.isPending,children:c.isPending?e.jsxs(e.Fragment,{children:[e.jsx(P,{className:"mr-2 h-4 w-4 animate-spin"}),"Salvando..."]}):"Salvar alterações"})]})})]}),n?.loginMethod==="email"&&e.jsxs(u,{children:[e.jsxs(x,{children:[e.jsxs(p,{className:"flex items-center gap-2",children:[e.jsx(T,{className:"h-5 w-5"}),"Alterar Senha"]}),e.jsx(f,{children:"Mantenha sua conta segura com uma senha forte"})]}),e.jsx(j,{children:e.jsxs("form",{onSubmit:S,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"oldPassword",children:"Senha atual"}),e.jsx(t,{id:"oldPassword",type:"password",value:a.oldPassword,onChange:s=>d({...a,oldPassword:s.target.value}),placeholder:"Digite sua senha atual",required:!0})]}),e.jsx(L,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"newPassword",children:"Nova senha"}),e.jsx(t,{id:"newPassword",type:"password",value:a.newPassword,onChange:s=>d({...a,newPassword:s.target.value}),placeholder:"Mínimo 6 caracteres",required:!0,minLength:6})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"confirmPassword",children:"Confirmar nova senha"}),e.jsx(t,{id:"confirmPassword",type:"password",value:a.confirmPassword,onChange:s=>d({...a,confirmPassword:s.target.value}),placeholder:"Digite a senha novamente",required:!0,minLength:6}),a.newPassword&&a.confirmPassword&&a.newPassword!==a.confirmPassword&&e.jsx("p",{className:"text-sm text-destructive",children:"As senhas não conferem"})]}),e.jsx(w,{type:"submit",disabled:m.isPending||a.newPassword!==a.confirmPassword,children:m.isPending?e.jsxs(e.Fragment,{children:[e.jsx(P,{className:"mr-2 h-4 w-4 animate-spin"}),"Alterando..."]}):"Alterar senha"})]})})]})]})})}export{re as default};
