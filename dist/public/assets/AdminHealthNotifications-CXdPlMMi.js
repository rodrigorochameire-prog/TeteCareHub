import{r as w,t as p,a as m,j as e,z as y,C as i,b as n,d as r,e as d,f as l,n as S,B as C,i as T,c as k,S as x}from"./index-DG0yx2hi.js";import{A}from"./AdminLayout-CapzJ-JK.js";import{B as o,S as g,P as u}from"./popover-Bqiz4euq.js";import{S as D,a as P,b as R,c as E,d as h}from"./select-k5kl2mY3.js";import{S as B}from"./send-BU_qFC5s.js";import"./scroll-area-C0S6gB82.js";import"./index-BdQq_4o_.js";import"./layout-dashboard-CC4g-mOh.js";import"./wallet-CKmMh37E.js";import"./users-DD1qYPM2.js";import"./user-B4BzRHVK.js";import"./index-r4-iOF84.js";import"./chevron-down-CKVtRMqG.js";import"./check-DDByOptX.js";function $(){const[c,N]=w.useState("7"),{data:s,refetch:f,isLoading:v}=p.healthNotifications.getUpcomingReminders.useQuery({daysAhead:parseInt(c)}),j=p.healthNotifications.sendHealthReminders.useMutation({onSuccess:a=>{a.sent?m.success(a.message):m.error(a.message),f()},onError:a=>{m.error(a.message||"Erro ao enviar notificação")}}),b=()=>{if(s&&s.total===0){m.info("Nenhum item próximo do vencimento para notificar");return}confirm(`Enviar notificação com ${s?.total||0} lembretes de saúde?`)&&j.mutate({daysAhead:parseInt(c)})};return e.jsx(A,{children:e.jsxs("div",{className:"container py-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold",children:"Notificações de Saúde"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Configure e envie lembretes automáticos de vacinas, medicamentos e preventivos"})]}),e.jsx(y,{className:"h-12 w-12 text-primary"})]}),e.jsxs("div",{className:"grid gap-6",children:[e.jsxs(i,{children:[e.jsxs(n,{children:[e.jsx(r,{children:"Painel de Controle"}),e.jsx(d,{children:"Configure o período de antecedência e envie notificações manualmente"})]}),e.jsxs(l,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Período de Antecedência"}),e.jsxs(D,{value:c,onValueChange:N,children:[e.jsxs(P,{className:"w-full",children:[e.jsx(S,{className:"h-4 w-4 mr-2"}),e.jsx(R,{})]}),e.jsxs(E,{children:[e.jsx(h,{value:"3",children:"3 dias"}),e.jsx(h,{value:"7",children:"7 dias (recomendado)"}),e.jsx(h,{value:"14",children:"14 dias"}),e.jsx(h,{value:"30",children:"30 dias"})]})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs(C,{onClick:b,disabled:j.isPending||v,size:"lg",children:[e.jsx(B,{className:"h-4 w-4 mr-2"}),"Enviar Notificação Agora"]})})]}),s&&s.total>0&&e.jsx("div",{className:"bg-orange-50 dark:bg-orange-950 border border-orange-200 dark:border-orange-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(T,{className:"h-5 w-5 text-orange-600 dark:text-orange-400 mt-0.5"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-orange-900 dark:text-orange-100",children:[s.total," ",s.total===1?"item próximo":"itens próximos"," do vencimento"]}),e.jsx("p",{className:"text-sm text-orange-700 dark:text-orange-300 mt-1",children:"Clique no botão acima para enviar uma notificação ao responsável"})]})]})}),s&&s.total===0&&e.jsx("div",{className:"bg-green-50 dark:bg-green-950 border border-green-200 dark:border-green-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(k,{className:"h-5 w-5 text-green-600 dark:text-green-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-green-900 dark:text-green-100",children:"Tudo em dia!"}),e.jsxs("p",{className:"text-sm text-green-700 dark:text-green-300 mt-1",children:["Nenhum item próximo do vencimento nos próximos ",c," dias"]})]})]})})]})]}),s&&s.total>0&&e.jsxs(i,{children:[e.jsx(n,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Resumo de Alertas"}),e.jsxs(d,{children:["Próximos ",c," dias"]})]}),e.jsxs(o,{variant:"default",className:"text-lg px-3 py-1",children:[s.total," total"]})]})}),e.jsx(l,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-muted/50 rounded-lg",children:[e.jsx(g,{className:"h-5 w-5 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xl font-bold",children:s.vaccinations.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Vacinas"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-muted/50 rounded-lg",children:[e.jsx(u,{className:"h-5 w-5 text-purple-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xl font-bold",children:s.medications.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Medicamentos"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-muted/50 rounded-lg",children:[e.jsx(x,{className:"h-5 w-5 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xl font-bold",children:s.fleaTreatments.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Antipulgas"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-muted/50 rounded-lg",children:[e.jsx(x,{className:"h-5 w-5 text-orange-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xl font-bold",children:s.dewormingTreatments.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Vermífugos"})]})]})]})})]}),s&&s.total>0&&e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[s.vaccinations.length>0&&e.jsxs(i,{children:[e.jsxs(n,{children:[e.jsxs(r,{className:"flex items-center gap-2",children:[e.jsx(g,{className:"h-5 w-5"}),"Vacinas Próximas"]}),e.jsxs(d,{children:[s.vaccinations.length," ",s.vaccinations.length===1?"vacina":"vacinas"," nos próximos ",c," dias"]})]}),e.jsx(l,{children:e.jsx("div",{className:"space-y-3",children:s.vaccinations.map((a,t)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:a.petName}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a.vaccineName})]}),e.jsx(o,{variant:"outline",children:new Date(a.nextDueDate).toLocaleDateString("pt-BR")})]},t))})})]}),s.medications.length>0&&e.jsxs(i,{children:[e.jsxs(n,{children:[e.jsxs(r,{className:"flex items-center gap-2",children:[e.jsx(u,{className:"h-5 w-5"}),"Medicamentos Terminando"]}),e.jsxs(d,{children:[s.medications.length," ",s.medications.length===1?"medicamento":"medicamentos"," terminando"]})]}),e.jsx(l,{children:e.jsx("div",{className:"space-y-3",children:s.medications.map((a,t)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:a.petName}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a.medicationName})]}),e.jsx(o,{variant:"outline",children:new Date(a.endDate).toLocaleDateString("pt-BR")})]},t))})})]}),s.fleaTreatments.length>0&&e.jsxs(i,{children:[e.jsxs(n,{children:[e.jsxs(r,{className:"flex items-center gap-2",children:[e.jsx(x,{className:"h-5 w-5"}),"Antipulgas Próximos"]}),e.jsxs(d,{children:[s.fleaTreatments.length," ",s.fleaTreatments.length===1?"aplicação":"aplicações"," próximas"]})]}),e.jsx(l,{children:e.jsx("div",{className:"space-y-3",children:s.fleaTreatments.map((a,t)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:a.petName}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a.productName})]}),e.jsx(o,{variant:"outline",children:new Date(a.nextDueDate).toLocaleDateString("pt-BR")})]},t))})})]}),s.dewormingTreatments.length>0&&e.jsxs(i,{children:[e.jsxs(n,{children:[e.jsxs(r,{className:"flex items-center gap-2",children:[e.jsx(x,{className:"h-5 w-5"}),"Vermífugos Próximos"]}),e.jsxs(d,{children:[s.dewormingTreatments.length," ",s.dewormingTreatments.length===1?"aplicação":"aplicações"," próximas"]})]}),e.jsx(l,{children:e.jsx("div",{className:"space-y-3",children:s.dewormingTreatments.map((a,t)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:a.petName}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a.productName})]}),e.jsx(o,{variant:"outline",children:new Date(a.nextDueDate).toLocaleDateString("pt-BR")})]},t))})})]})]}),e.jsxs(i,{children:[e.jsxs(n,{children:[e.jsx(r,{children:"Como Configurar Notificações Automáticas"}),e.jsx(d,{children:"Agende verificações diárias para enviar notificações automaticamente"})]}),e.jsx(l,{className:"space-y-4",children:e.jsxs("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:[e.jsxs("p",{children:["Para configurar notificações automáticas diárias, você pode usar ferramentas de agendamento como ",e.jsx("strong",{children:"cron"})," (Linux/Mac) ou ",e.jsx("strong",{children:"Task Scheduler"})," (Windows), ou serviços de monitoramento como ",e.jsx("strong",{children:"UptimeRobot"})," ou ",e.jsx("strong",{children:"Cronitor"}),"."]}),e.jsx("h4",{className:"font-semibold mt-4 mb-2",children:"Exemplo com cURL:"}),e.jsx("pre",{className:"bg-muted p-3 rounded-lg overflow-x-auto text-xs",children:`curl -X POST https://seu-dominio.com/api/trpc/healthNotifications.sendHealthReminders \\
  -H "Content-Type: application/json" \\
  -H "Cookie: auth_token=SEU_TOKEN" \\
  -d '{"daysAhead": 7}'`}),e.jsx("h4",{className:"font-semibold mt-4 mb-2",children:"Exemplo com cron (executar diariamente às 9h):"}),e.jsx("pre",{className:"bg-muted p-3 rounded-lg overflow-x-auto text-xs",children:"0 9 * * * curl -X POST https://seu-dominio.com/api/trpc/healthNotifications.sendHealthReminders ..."}),e.jsxs("p",{className:"mt-4",children:[e.jsx("strong",{children:"Nota:"}),' Por enquanto, use o botão "Enviar Notificação Agora" acima para testar e enviar notificações manualmente.']})]})})]})]})]})})}export{$ as default};
