import{j as e,ao as d,ap as m,aq as x,ar as u}from"./index-DG0yx2hi.js";import{B as p}from"./popover-Bqiz4euq.js";import{U as h}from"./user-B4BzRHVK.js";import{C as f}from"./clock-BQzFMz2h.js";function V({changes:t,resourceType:o}){if(!t||t.length===0)return null;const s=t[0],l=new Date(s.createdAt),r=new Date().getTime()-l.getTime(),a=Math.floor(r/36e5),n=Math.floor(r/864e5);if(s.changedByRole!=="admin"||n>7)return null;const i=a<24?`há ${a} hora${a!==1?"s":""}`:`há ${n} dia${n!==1?"s":""}`,c=()=>({medication:"medicamento",vaccine:"vacina",food:"alimentação",preventive:"preventivo"})[o]||o;return e.jsx(d,{children:e.jsxs(m,{children:[e.jsx(x,{asChild:!0,children:e.jsxs(p,{variant:"outline",className:"bg-purple-50 text-purple-700 border-purple-200 cursor-help",children:[e.jsx(h,{className:"h-3 w-3 mr-1"}),"Atualizado pelo admin ",i]})}),e.jsx(u,{side:"bottom",className:"max-w-xs",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"font-medium text-sm",children:["Alteração recente no ",c()]}),e.jsxs("div",{className:"text-xs space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[e.jsx(f,{className:"h-3 w-3"}),l.toLocaleString("pt-BR")]}),s.oldValue&&s.newValue&&e.jsx("div",{className:"mt-2 p-2 bg-muted rounded text-xs",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"line-through text-muted-foreground",children:s.oldValue}),e.jsx("span",{children:"→"}),e.jsx("span",{className:"text-green-600 font-medium",children:s.newValue})]})}),!s.oldValue&&s.newValue&&e.jsx("div",{className:"mt-2 p-2 bg-muted rounded text-xs",children:e.jsx("span",{className:"text-green-600 font-medium",children:s.newValue})})]})]})})]})})}export{V as R};
