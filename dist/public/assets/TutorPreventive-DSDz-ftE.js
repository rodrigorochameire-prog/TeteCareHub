import{t as h,r as m,j as e,C as b,f as D,b as C,d as S,a as N,e as G,L as B,B as u,aD as z,n as J,o as U,p as I,q as Q,s as H,h as p,I as f,i as L,c as K}from"./index-DG0yx2hi.js";import{S as P,P as V,B as k}from"./popover-Bqiz4euq.js";import{T as W,a as X,b as F,c as M}from"./tabs-sUy1g-fW.js";import{T as $}from"./textarea-BfRN5q_Y.js";import{T as E}from"./TutorLayout-lMG2oLBz.js";import{B as q}from"./bug-Q7u3vQpS.js";import{P as O}from"./plus-DIKUpKHa.js";import{T as R}from"./trash-2-6I2MbiK3.js";import{f as w,p as y}from"./pt-BR-BIS3WgEC.js";import"./NotificationBell-BIuiN9Fe.js";import"./info-DReA-lTp.js";import"./message-square-COhalQ2E.js";import"./chart-column-B4FPjduw.js";import"./package-CC5WVNv6.js";import"./user-B4BzRHVK.js";function pe(){const{data:t,isLoading:d}=h.pets.list.useQuery(),[r,c]=m.useState(null),[n,i]=m.useState(!1),[x,o]=m.useState(!1);return d?e.jsx(E,{children:e.jsx("div",{className:"container max-w-7xl py-8",children:e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})})}):!t||t.length===0?e.jsx(E,{children:e.jsx("div",{className:"container max-w-7xl py-8",children:e.jsx(b,{children:e.jsxs(D,{className:"empty-state",children:[e.jsx(P,{className:"empty-state-icon"}),e.jsx("p",{className:"empty-state-title",children:"Nenhum pet cadastrado"}),e.jsx("p",{className:"empty-state-description",children:"Entre em contato com a creche para cadastrar seu pet"})]})})})}):e.jsx(E,{children:e.jsxs("div",{className:"container max-w-7xl py-8 space-y-8 animate-fade-in",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold tracking-tight flex items-center gap-2",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-cyan-500 rounded-lg",children:e.jsx(P,{className:"h-7 w-7 text-white"})}),"Cuidados Preventivos"]}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Mantenha a saúde dos seus pets em dia com vacinas, antipulgas e vermífugos"})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs(b,{className:"border-blue-200 bg-blue-50 dark:bg-blue-950/20",children:[e.jsx(C,{className:"pb-3",children:e.jsxs(S,{className:"text-sm font-medium flex items-center gap-2 text-blue-700 dark:text-blue-300",children:[e.jsx(P,{className:"h-4 w-4"}),"Vacinas"]})}),e.jsx(D,{children:e.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:"Protegem contra doenças graves como raiva, cinomose e parvovirose"})})]}),e.jsxs(b,{className:"border-green-200 bg-green-50 dark:bg-green-950/20",children:[e.jsx(C,{className:"pb-3",children:e.jsxs(S,{className:"text-sm font-medium flex items-center gap-2 text-green-700 dark:text-green-300",children:[e.jsx(q,{className:"h-4 w-4"}),"Antipulgas"]})}),e.jsx(D,{children:e.jsx("p",{className:"text-xs text-green-600 dark:text-green-400",children:"Previnem infestações e doenças transmitidas por pulgas e carrapatos"})})]}),e.jsxs(b,{className:"border-purple-200 bg-purple-50 dark:bg-purple-950/20",children:[e.jsx(C,{className:"pb-3",children:e.jsxs(S,{className:"text-sm font-medium flex items-center gap-2 text-purple-700 dark:text-purple-300",children:[e.jsx(V,{className:"h-4 w-4"}),"Vermífugos"]})}),e.jsx(D,{children:e.jsx("p",{className:"text-xs text-purple-600 dark:text-purple-400",children:"Eliminam vermes intestinais que podem causar problemas de saúde"})})]})]}),e.jsx("div",{className:"grid gap-6",children:t.map(l=>e.jsx(Y,{pet:l,onAddFlea:()=>{c(l.id),i(!0)},onAddDeworming:()=>{c(l.id),o(!0)}},l.id))}),e.jsx(Z,{open:n,onOpenChange:i,petId:r}),e.jsx(_,{open:x,onOpenChange:o,petId:r})]})})}function Y({pet:t,onAddFlea:d,onAddDeworming:r}){const c=h.useUtils(),{data:n}=h.flea.list.useQuery({petId:t.id}),{data:i}=h.deworming.list.useQuery({petId:t.id}),x=h.flea.delete.useMutation({onSuccess:()=>{c.flea.list.invalidate({petId:t.id}),N.success("Antipulgas removido")}}),o=h.deworming.delete.useMutation({onSuccess:()=>{c.deworming.list.invalidate({petId:t.id}),N.success("Vermífugo removido")}}),l=s=>{const j=new Date,v=Math.floor((new Date(s).getTime()-j.getTime())/(1e3*60*60*24));return v<0?e.jsxs(k,{variant:"destructive",className:"gap-1",children:[e.jsx(L,{className:"h-3 w-3"})," Atrasado"]}):v<=7?e.jsxs(k,{variant:"secondary",className:"gap-1",children:[e.jsx(L,{className:"h-3 w-3"})," Próximo"]}):e.jsxs(k,{variant:"default",className:"gap-1 bg-green-500",children:[e.jsx(K,{className:"h-3 w-3"})," Em dia"]})};return e.jsxs(b,{className:"shadow-card hover-lift",children:[e.jsx(C,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-gradient-to-br from-primary to-primary/70 flex items-center justify-center text-white font-bold text-lg",children:t.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx(S,{children:t.name}),e.jsx(G,{children:t.breed})]})]}),e.jsx(B,{href:`/tutor/pets/${t.id}`,children:e.jsxs(u,{variant:"outline",size:"sm",children:["Ver Detalhes",e.jsx(z,{className:"h-4 w-4 ml-2"})]})})]})}),e.jsx(D,{children:e.jsxs(W,{defaultValue:"vaccines",className:"w-full",children:[e.jsxs(X,{className:"grid w-full grid-cols-3",children:[e.jsxs(F,{value:"vaccines",children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),"Vacinas"]}),e.jsxs(F,{value:"flea",children:[e.jsx(q,{className:"h-4 w-4 mr-2"}),"Antipulgas"]}),e.jsxs(F,{value:"deworming",children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),"Vermífugos"]})]}),e.jsx(M,{value:"vaccines",className:"space-y-4 mt-4",children:e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border bg-card",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(J,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Gerenciar Vacinas"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Visualize e acompanhe o calendário de vacinação"})]})]}),e.jsx(B,{href:`/tutor/pets/${t.id}/vaccines`,children:e.jsxs(u,{size:"sm",children:["Acessar",e.jsx(z,{className:"h-4 w-4 ml-2"})]})})]})}),e.jsxs(M,{value:"flea",className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:[n?.length||0," aplicações registradas"]}),e.jsxs(u,{size:"sm",onClick:d,children:[e.jsx(O,{className:"h-4 w-4 mr-2"}),"Adicionar"]})]}),n&&n.length>0?e.jsx("div",{className:"space-y-3",children:n.map(s=>e.jsx("div",{className:"p-4 rounded-lg border bg-card hover:bg-accent/50 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("p",{className:"font-medium",children:s.productName}),l(s.nextDueDate)]}),e.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsxs("p",{children:["Aplicação: ",w(new Date(s.applicationDate),"dd/MM/yyyy",{locale:y})]}),e.jsxs("p",{children:["Próxima dose: ",w(new Date(s.nextDueDate),"dd/MM/yyyy",{locale:y})]}),s.notes&&e.jsxs("p",{className:"italic",children:['"',s.notes,'"']})]})]}),e.jsx(u,{variant:"ghost",size:"sm",onClick:()=>x.mutate({id:s.id}),disabled:x.isPending,children:e.jsx(R,{className:"h-4 w-4 text-destructive"})})]})},s.id))}):e.jsxs("div",{className:"p-6 rounded-lg border-2 border-dashed border-border bg-muted/30 text-center",children:[e.jsx(q,{className:"h-12 w-12 mx-auto mb-3 text-muted-foreground"}),e.jsx("p",{className:"font-medium mb-1",children:"Nenhuma aplicação registrada"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:'Clique em "Adicionar" para registrar a primeira aplicação'})]})]}),e.jsxs(M,{value:"deworming",className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:[i?.length||0," aplicações registradas"]}),e.jsxs(u,{size:"sm",onClick:r,children:[e.jsx(O,{className:"h-4 w-4 mr-2"}),"Adicionar"]})]}),i&&i.length>0?e.jsx("div",{className:"space-y-3",children:i.map(s=>e.jsx("div",{className:"p-4 rounded-lg border bg-card hover:bg-accent/50 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("p",{className:"font-medium",children:s.productName}),l(s.nextDueDate)]}),e.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsxs("p",{children:["Aplicação: ",w(new Date(s.applicationDate),"dd/MM/yyyy",{locale:y})]}),e.jsxs("p",{children:["Próxima dose: ",w(new Date(s.nextDueDate),"dd/MM/yyyy",{locale:y})]}),s.notes&&e.jsxs("p",{className:"italic",children:['"',s.notes,'"']})]})]}),e.jsx(u,{variant:"ghost",size:"sm",onClick:()=>o.mutate({id:s.id}),disabled:o.isPending,children:e.jsx(R,{className:"h-4 w-4 text-destructive"})})]})},s.id))}):e.jsxs("div",{className:"p-6 rounded-lg border-2 border-dashed border-border bg-muted/30 text-center",children:[e.jsx(V,{className:"h-12 w-12 mx-auto mb-3 text-muted-foreground"}),e.jsx("p",{className:"font-medium mb-1",children:"Nenhuma aplicação registrada"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:'Clique em "Adicionar" para registrar a primeira aplicação'})]})]})]})})]})}function Z({open:t,onOpenChange:d,petId:r}){const[c,n]=m.useState(""),[i,x]=m.useState(""),[o,l]=m.useState(""),[s,j]=m.useState(""),v=h.useUtils(),g=h.flea.create.useMutation({onSuccess:()=>{r&&v.flea.list.invalidate({petId:r}),N.success("Antipulgas registrado com sucesso!"),d(!1),A()},onError:a=>{N.error(a.message||"Erro ao registrar antipulgas")}}),A=()=>{n(""),x(""),l(""),j("")},T=a=>{a.preventDefault(),r&&g.mutate({petId:r,productName:c,applicationDate:new Date(i),nextDueDate:new Date(o),notes:s||void 0})};return e.jsx(U,{open:t,onOpenChange:d,children:e.jsxs(I,{children:[e.jsx(Q,{children:e.jsx(H,{children:"Registrar Antipulgas"})}),e.jsxs("form",{onSubmit:T,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"productName",children:"Produto *"}),e.jsx(f,{id:"productName",value:c,onChange:a=>n(a.target.value),placeholder:"Ex: Bravecto, Nexgard, Simparic",required:!0})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"applicationDate",children:"Data de Aplicação *"}),e.jsx(f,{id:"applicationDate",type:"date",value:i,onChange:a=>x(a.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"nextDueDate",children:"Próxima Dose *"}),e.jsx(f,{id:"nextDueDate",type:"date",value:o,onChange:a=>l(a.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"notes",children:"Observações"}),e.jsx($,{id:"notes",value:s,onChange:a=>j(a.target.value),placeholder:"Observações adicionais...",rows:3})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(u,{type:"button",variant:"outline",onClick:()=>d(!1),children:"Cancelar"}),e.jsx(u,{type:"submit",disabled:g.isPending,children:g.isPending?"Salvando...":"Salvar"})]})]})]})})}function _({open:t,onOpenChange:d,petId:r}){const[c,n]=m.useState(""),[i,x]=m.useState(""),[o,l]=m.useState(""),[s,j]=m.useState(""),v=h.useUtils(),g=h.deworming.create.useMutation({onSuccess:()=>{r&&v.deworming.list.invalidate({petId:r}),N.success("Vermífugo registrado com sucesso!"),d(!1),A()},onError:a=>{N.error(a.message||"Erro ao registrar vermífugo")}}),A=()=>{n(""),x(""),l(""),j("")},T=a=>{a.preventDefault(),r&&g.mutate({petId:r,productName:c,applicationDate:new Date(i),nextDueDate:new Date(o),notes:s||void 0})};return e.jsx(U,{open:t,onOpenChange:d,children:e.jsxs(I,{children:[e.jsx(Q,{children:e.jsx(H,{children:"Registrar Vermífugo"})}),e.jsxs("form",{onSubmit:T,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"productName",children:"Produto *"}),e.jsx(f,{id:"productName",value:c,onChange:a=>n(a.target.value),placeholder:"Ex: Drontal, Endogard, Milbemax",required:!0})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"applicationDate",children:"Data de Aplicação *"}),e.jsx(f,{id:"applicationDate",type:"date",value:i,onChange:a=>x(a.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"nextDueDate",children:"Próxima Dose *"}),e.jsx(f,{id:"nextDueDate",type:"date",value:o,onChange:a=>l(a.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"notes",children:"Observações"}),e.jsx($,{id:"notes",value:s,onChange:a=>j(a.target.value),placeholder:"Observações adicionais...",rows:3})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(u,{type:"button",variant:"outline",onClick:()=>d(!1),children:"Cancelar"}),e.jsx(u,{type:"submit",disabled:g.isPending,children:g.isPending?"Salvando...":"Salvar"})]})]})]})})}export{pe as default};
