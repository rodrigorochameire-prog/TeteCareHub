import{m as E,r as x,t as u,a as m,j as e,C as j,b as O,d as P,n as I,f as R,B as n,o as _,p as q,q as G,s as M,v as H,h,I as U,w as Q}from"./index-DG0yx2hi.js";import{T as Y}from"./TutorLayout-lMG2oLBz.js";import{S as v,a as y,b as D,c as C,d as p}from"./select-k5kl2mY3.js";import{T as Z}from"./textarea-BfRN5q_Y.js";import{F as o,B as J}from"./popover-Bqiz4euq.js";import{D as W}from"./DocumentUpload-BKsTr8iI.js";import{D as X}from"./DocumentViewer-DvseRbVf.js";import{C as $}from"./clock-BQzFMz2h.js";import{S as K}from"./square-pen-D7F5zf6L.js";import{T as ee}from"./trash-2-6I2MbiK3.js";import"./NotificationBell-BIuiN9Fe.js";import"./pt-BR-BIS3WgEC.js";import"./info-DReA-lTp.js";import"./message-square-COhalQ2E.js";import"./chart-column-B4FPjduw.js";import"./package-CC5WVNv6.js";import"./user-B4BzRHVK.js";import"./index-BdQq_4o_.js";import"./index-r4-iOF84.js";import"./chevron-down-CKVtRMqG.js";import"./check-DDByOptX.js";import"./progress-BQ_EYLtW.js";import"./upload-Ck_fQFtx.js";import"./tabs-sUy1g-fW.js";import"./download-DIpAs7NP.js";import"./image-BoirZu0B.js";import"./chevron-left-DzbQ4jE-.js";import"./chevron-right-DecBlSPI.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=E("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=E("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]),N={vaccination_card:"Carteira de Vacinação",veterinary_document:"Documento Veterinário",exam:"Exame",certificate:"Certificado",prescription:"Prescrição",other:"Outro"},ae={vaccination_card:e.jsx(o,{className:"h-5 w-5 text-green-600"}),veterinary_document:e.jsx(o,{className:"h-5 w-5 text-blue-600"}),exam:e.jsx(o,{className:"h-5 w-5 text-purple-600"}),certificate:e.jsx(o,{className:"h-5 w-5 text-yellow-600"}),prescription:e.jsx(o,{className:"h-5 w-5 text-orange-600"}),other:e.jsx(o,{className:"h-5 w-5 text-gray-600"})};function re({petId:i,showUpload:l=!0}){const[c,r]=x.useState(null),[g,w]=x.useState(null),[d,V]=x.useState("date"),{data:b,refetch:f}=u.documents.getPetDocuments.useQuery({petId:i},{enabled:!!i}),S=u.documents.update.useMutation({onSuccess:()=>{m.success("Documento atualizado!"),r(null),f()},onError:s=>{m.error("Erro ao atualizar: "+s.message)}}),k=u.documents.delete.useMutation({onSuccess:()=>{m.success("Documento excluído!"),f()},onError:s=>{m.error("Erro ao excluir: "+s.message)}}),A=s=>{s.preventDefault();const a=new FormData(s.currentTarget);S.mutate({id:c.id,title:a.get("title"),description:a.get("description"),category:a.get("category")})},B=s=>{confirm("Tem certeza que deseja excluir este documento?")&&k.mutate({id:s})},z=s=>new Date(s).toLocaleDateString("pt-BR",{day:"2-digit",month:"long",year:"numeric"}),F=s=>new Date(s).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}),L=b?.reduce((s,a)=>{const t=d==="category"?a.category:new Date(a.createdAt).toLocaleDateString("pt-BR",{year:"numeric",month:"long"});return s[t]||(s[t]=[]),s[t].push(a),s},{}),T=Object.entries(L||{}).sort(([s],[a])=>d==="date"?a.localeCompare(s):s.localeCompare(a));return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Documentos"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[b?.length||0," documento(s) cadastrado(s)"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(v,{value:d,onValueChange:s=>V(s),children:[e.jsx(y,{className:"w-[180px]",children:e.jsx(D,{})}),e.jsxs(C,{children:[e.jsx(p,{value:"date",children:"Agrupar por Data"}),e.jsx(p,{value:"category",children:"Agrupar por Categoria"})]})]}),l&&e.jsx(W,{petId:i,onUploadSuccess:f})]})]}),T.length===0?e.jsx(j,{className:"p-12",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx(o,{className:"h-16 w-16 mx-auto text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Nenhum Documento"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:l?"Comece enviando o primeiro documento":"Este pet não possui documentos cadastrados"})]})]})}):e.jsx("div",{className:"space-y-8",children:T.map(([s,a])=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-px flex-1 bg-border"}),e.jsx("h3",{className:"text-lg font-semibold px-4 bg-background",children:d==="category"?N[s]:s}),e.jsx("div",{className:"h-px flex-1 bg-border"})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:a.map(t=>e.jsxs(j,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(O,{className:"pb-3",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[ae[t.category],e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx(P,{className:"text-base line-clamp-2",children:t.title}),e.jsxs("div",{className:"flex items-center gap-2 mt-1 text-xs text-muted-foreground",children:[e.jsx(I,{className:"h-3 w-3"}),z(t.createdAt),e.jsx($,{className:"h-3 w-3 ml-2"}),F(t.createdAt)]})]})]})})}),e.jsxs(R,{children:[t.description&&e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-3",children:t.description}),e.jsx(J,{variant:"secondary",className:"mb-3",children:N[t.category]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(n,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>w(t),children:[e.jsx(se,{className:"h-4 w-4 mr-1"}),"Ver"]}),e.jsx(n,{variant:"outline",size:"sm",onClick:()=>r(t),children:e.jsx(K,{className:"h-4 w-4"})}),e.jsx(n,{variant:"outline",size:"sm",onClick:()=>B(t.id),children:e.jsx(ee,{className:"h-4 w-4"})})]})]})]},t.id))})]},s))}),e.jsx(_,{open:!!c,onOpenChange:s=>!s&&r(null),children:e.jsx(q,{children:e.jsxs("form",{onSubmit:A,children:[e.jsxs(G,{children:[e.jsx(M,{children:"Editar Documento"}),e.jsx(H,{children:"Atualize as informações do documento"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"edit-title",children:"Título *"}),e.jsx(U,{id:"edit-title",name:"title",defaultValue:c?.title,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"edit-category",children:"Categoria *"}),e.jsxs(v,{name:"category",defaultValue:c?.category,required:!0,children:[e.jsx(y,{children:e.jsx(D,{})}),e.jsx(C,{children:Object.entries(N).map(([s,a])=>e.jsx(p,{value:s,children:a},s))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"edit-description",children:"Descrição"}),e.jsx(Z,{id:"edit-description",name:"description",defaultValue:c?.description,rows:3})]})]}),e.jsxs(Q,{children:[e.jsx(n,{type:"button",variant:"outline",onClick:()=>r(null),children:"Cancelar"}),e.jsx(n,{type:"submit",disabled:S.isPending,children:"Salvar"})]})]})})}),g&&e.jsx(X,{document:g,isOpen:!!g,onClose:()=>w(null)})]})}function ze(){const[i,l]=x.useState(),{data:c}=u.pets.list.useQuery();return e.jsx(Y,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Documentos"}),e.jsx("p",{className:"text-muted-foreground",children:"Gerencie documentos veterinários, exames e certificados dos seus pets"})]}),e.jsxs(j,{className:"p-4",children:[e.jsx(h,{children:"Selecione o Pet"}),e.jsxs(v,{value:i?.toString(),onValueChange:r=>l(Number(r)),children:[e.jsx(y,{children:e.jsx(D,{placeholder:"Escolha um pet"})}),e.jsx(C,{children:c?.map(r=>e.jsx(p,{value:r.id.toString(),children:r.name},r.id))})]})]}),i?e.jsx(re,{petId:i,showUpload:!0}):e.jsx(j,{className:"p-12",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx(te,{className:"h-16 w-16 mx-auto text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Selecione um Pet"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Escolha um pet acima para visualizar seus documentos"})]})]})})]})})}export{ze as default};
