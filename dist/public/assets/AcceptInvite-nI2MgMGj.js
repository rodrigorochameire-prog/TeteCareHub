import{aE as b,u as k,t as p,r as o,a as g,j as e,C as d,b as l,d as m,e as u,f as x,B as h,l as v,c as y}from"./index-DG0yx2hi.js";import{C as w}from"./circle-x-Ewhe70CR.js";import{M as L}from"./mail-DVbdA7bp.js";const E=()=>{const f=window.location.origin;return`undefined?redirect_uri=${encodeURIComponent(f+"/api/oauth/callback")}`};function A(){const[,f]=b("/accept-invite"),[,t]=k(),{data:i,isLoading:n}=p.auth.me.useQuery(),[s,c]=o.useState("loading"),[C,a]=o.useState(""),r=new URLSearchParams(window.location.search).get("token"),N=p.adminInvites.accept.useMutation({onSuccess:()=>{c("success"),a("Convite aceito com sucesso! Você agora é um administrador."),g.success("Bem-vindo como administrador!"),setTimeout(()=>{t("/dashboard")},2e3)},onError:j=>{c("error"),a(j.message),g.error("Erro ao aceitar convite: "+j.message)}});return o.useEffect(()=>{if(!r){c("error"),a("Token de convite inválido");return}if(!n){if(!i){a("Você precisa fazer login para aceitar o convite");return}N.mutate({token:r})}},[r,i,n]),r?n?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background to-muted",children:e.jsx(v,{className:"h-8 w-8 animate-spin text-primary"})}):i?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background to-muted p-4",children:e.jsxs(d,{className:"w-full max-w-md",children:[e.jsxs(l,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[s==="loading"&&e.jsx(v,{className:"h-6 w-6 animate-spin text-primary"}),s==="success"&&e.jsx(y,{className:"h-6 w-6 text-green-500"}),s==="error"&&e.jsx(w,{className:"h-6 w-6 text-destructive"}),e.jsxs(m,{children:[s==="loading"&&"Processando Convite...",s==="success"&&"Convite Aceito!",s==="error"&&"Erro ao Aceitar Convite"]})]}),e.jsx(u,{children:C})]}),s==="error"&&e.jsx(x,{children:e.jsx(h,{onClick:()=>t("/"),className:"w-full",children:"Voltar para Home"})})]})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background to-muted p-4",children:e.jsxs(d,{className:"w-full max-w-md",children:[e.jsxs(l,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{className:"h-6 w-6 text-primary"}),e.jsx(m,{children:"Convite de Administrador"})]}),e.jsx(u,{children:"Você foi convidado para ser administrador da plataforma"})]}),e.jsxs(x,{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Para aceitar o convite, você precisa fazer login primeiro."}),e.jsx(h,{onClick:()=>window.location.href=E(),className:"w-full",children:"Fazer Login"})]})]})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background to-muted p-4",children:e.jsxs(d,{className:"w-full max-w-md",children:[e.jsxs(l,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{className:"h-6 w-6 text-destructive"}),e.jsx(m,{children:"Convite Inválido"})]}),e.jsx(u,{children:"O link de convite é inválido ou expirou"})]}),e.jsx(x,{children:e.jsx(h,{onClick:()=>t("/"),className:"w-full",children:"Voltar para Home"})})]})})}export{A as default};
