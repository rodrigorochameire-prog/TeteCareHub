import{t as m,r as H,j as e,C as a,b as d,d as o,f as i,n as q,K,e as h}from"./index-DG0yx2hi.js";import{T as N}from"./TutorLayout-lMG2oLBz.js";import{T as I}from"./trending-up-C2VanZIM.js";import{T as M}from"./trending-down-S1-mxyMB.js";import{a as O}from"./popover-Bqiz4euq.js";import{R as p,L as Q,C as v,X as w,Y as C,T as u,b as D,a as z,B as E,c as P}from"./LineChart-CD6pLqis.js";import{B as W}from"./BarChart-C1UGB1Aa.js";import{P as T,a as L}from"./PieChart-BQ4Gmhp3.js";import{A as X}from"./activity-DL-_hozy.js";import"./NotificationBell-BIuiN9Fe.js";import"./pt-BR-BIS3WgEC.js";import"./info-DReA-lTp.js";import"./message-square-COhalQ2E.js";import"./chart-column-B4FPjduw.js";import"./package-CC5WVNv6.js";import"./user-B4BzRHVK.js";import"./findIndex-Ckvz6Jh7.js";function ce(){const{data:k=[],isLoading:A}=m.pets.list.useQuery(),f=k,[r,$]=H.useState(null),R=f.find(s=>s.id===r),{data:l=[]}=m.pets.getWeightHistory.useQuery({petId:r},{enabled:!!r}),{data:F=[]}=m.pets.getMoodHistory.useQuery({petId:r},{enabled:!!r}),{data:c=[]}=m.pets.getFrequencyStats.useQuery({petId:r},{enabled:!!r}),{data:n=[]}=m.behavior.list.useQuery({petId:r??void 0},{enabled:!!r}),S=F.reduce((s,t)=>{const y=t.mood||"unknown";return s[y]=(s[y]||0)+1,s},{}),x=Object.entries(S).map(([s,t])=>({name:s==="happy"?"Feliz":s==="calm"?"Calmo":s==="anxious"?"Ansioso":s==="playful"?"Brincalh√£o":"Desconhecido",value:t})),B={Feliz:"#10b981",Calmo:"#3b82f6",Ansioso:"#f59e0b",Brincalh√£o:"#8b5cf6",Desconhecido:"#6b7280"},g={positive:n.filter(s=>s.behaviorType==="positive").length,negative:n.filter(s=>s.behaviorType==="negative").length,neutral:n.filter(s=>s.behaviorType==="neutral").length},b=[{name:"Positivos",value:g.positive,color:"#10b981"},{name:"Negativos",value:g.negative,color:"#ef4444"},{name:"Neutros",value:g.neutral,color:"#6b7280"}],j=l.length>=2?l[l.length-1].weight-l[0].weight:0;return A?e.jsx(N,{children:e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})}):e.jsx(N,{children:e.jsxs("div",{className:"container max-w-7xl py-8 animate-fade-in",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Dashboard Anal√≠tico"}),e.jsx("p",{className:"text-muted-foreground",children:"Acompanhe a evolu√ß√£o e estat√≠sticas do seu pet"})]}),e.jsxs(a,{className:"mb-6",children:[e.jsx(d,{children:e.jsx(o,{children:"Selecione o Pet"})}),e.jsx(i,{children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:f.map(s=>e.jsx("button",{onClick:()=>$(s.id),className:`p-4 rounded-lg border-2 transition-all ${r===s.id?"border-primary bg-primary/10":"border-border hover:border-primary/50"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl mb-2",children:"üêï"}),e.jsx("p",{className:"font-semibold",children:s.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.breed})]})},s.id))})})]}),R?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[e.jsx(a,{children:e.jsx(i,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Peso Atual"}),e.jsx("p",{className:"text-2xl font-bold",children:l.length>0?`${l[l.length-1].weight} kg`:"N/A"})]}),j!==0&&e.jsxs("div",{className:`flex items-center gap-1 ${j>0?"text-green-600":"text-red-600"}`,children:[j>0?e.jsx(I,{className:"h-5 w-5"}):e.jsx(M,{className:"h-5 w-5"}),e.jsxs("span",{className:"text-sm font-medium",children:[Math.abs(j).toFixed(1)," kg"]})]})]})})}),e.jsx(a,{children:e.jsx(i,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Frequ√™ncia Mensal"}),e.jsx("p",{className:"text-2xl font-bold",children:c.length>0?`${c[c.length-1].frequency} dias`:"0 dias"})]}),e.jsx(q,{className:"h-8 w-8 text-primary"})]})})}),e.jsx(a,{children:e.jsx(i,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Comportamentos"}),e.jsx("p",{className:"text-2xl font-bold",children:n.length})]}),e.jsx(O,{className:"h-8 w-8 text-primary"})]})})}),e.jsx(a,{children:e.jsx(i,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Humor Predominante"}),e.jsx("p",{className:"text-2xl font-bold",children:x.length>0?x.sort((s,t)=>t.value-s.value)[0].name:"N/A"})]}),e.jsx(K,{className:"h-8 w-8 text-primary"})]})})})]}),l.length>0&&e.jsxs(a,{children:[e.jsxs(d,{children:[e.jsx(o,{children:"Evolu√ß√£o de Peso"}),e.jsx(h,{children:"Acompanhe o ganho ou perda de peso ao longo do tempo"})]}),e.jsx(i,{children:e.jsx(p,{width:"100%",height:300,children:e.jsxs(Q,{data:l,children:[e.jsx(v,{strokeDasharray:"3 3"}),e.jsx(w,{dataKey:"date",tickFormatter:s=>new Date(s).toLocaleDateString("pt-BR",{month:"short",day:"numeric"})}),e.jsx(C,{label:{value:"Peso (kg)",angle:-90,position:"insideLeft"}}),e.jsx(u,{labelFormatter:s=>new Date(s).toLocaleDateString("pt-BR"),formatter:s=>[`${s} kg`,"Peso"]}),e.jsx(D,{}),e.jsx(z,{type:"monotone",dataKey:"weight",stroke:"#ff6600",strokeWidth:2,name:"Peso (kg)"})]})})})]}),c.length>0&&e.jsxs(a,{children:[e.jsxs(d,{children:[e.jsx(o,{children:"Frequ√™ncia Mensal na Creche"}),e.jsx(h,{children:"N√∫mero de dias por m√™s"})]}),e.jsx(i,{children:e.jsx(p,{width:"100%",height:300,children:e.jsxs(W,{data:c,children:[e.jsx(v,{strokeDasharray:"3 3"}),e.jsx(w,{dataKey:"month"}),e.jsx(C,{label:{value:"Dias",angle:-90,position:"insideLeft"}}),e.jsx(u,{formatter:s=>[`${s} dias`,"Frequ√™ncia"]}),e.jsx(D,{}),e.jsx(E,{dataKey:"frequency",fill:"#ff6600",name:"Dias na creche"})]})})})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[x.length>0&&e.jsxs(a,{children:[e.jsxs(d,{children:[e.jsx(o,{children:"Distribui√ß√£o de Humor"}),e.jsx(h,{children:"Como seu pet tem se sentido"})]}),e.jsx(i,{children:e.jsx(p,{width:"100%",height:300,children:e.jsxs(T,{children:[e.jsx(L,{data:x,cx:"50%",cy:"50%",labelLine:!1,label:({name:s,percent:t})=>`${s} ${(t*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:x.map((s,t)=>e.jsx(P,{fill:B[s.name]||"#6b7280"},`cell-${t}`))}),e.jsx(u,{})]})})})]}),n.length>0&&e.jsxs(a,{children:[e.jsxs(d,{children:[e.jsx(o,{children:"Comportamentos Registrados"}),e.jsx(h,{children:"Distribui√ß√£o por tipo"})]}),e.jsx(i,{children:e.jsx(p,{width:"100%",height:300,children:e.jsxs(T,{children:[e.jsx(L,{data:b,cx:"50%",cy:"50%",labelLine:!1,label:({name:s,percent:t})=>`${s} ${(t*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:b.map((s,t)=>e.jsx(P,{fill:s.color},`cell-${t}`))}),e.jsx(u,{})]})})})]})]}),n.length>0&&e.jsxs(a,{children:[e.jsxs(d,{children:[e.jsx(o,{children:"Comportamentos Recentes"}),e.jsx(h,{children:"√öltimos 10 registros"})]}),e.jsx(i,{children:e.jsx("div",{className:"space-y-4",children:n.slice(0,10).map(s=>e.jsxs("div",{className:"flex items-start gap-4 p-4 rounded-lg border",children:[e.jsx("div",{className:`w-2 h-2 rounded-full mt-2 ${s.behaviorType==="positive"?"bg-green-500":s.behaviorType==="negative"?"bg-red-500":"bg-gray-500"}`}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("p",{className:"font-medium",children:s.description}),e.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(s.date).toLocaleDateString("pt-BR")})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.location==="daycare"?"Creche":s.location==="home"?"Casa":s.location==="walk"?"Passeio":s.location})]})]},s.id))})})]})]}):e.jsx(a,{children:e.jsxs(i,{className:"py-12 text-center",children:[e.jsx(X,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground opacity-50"}),e.jsx("p",{className:"text-lg font-medium text-muted-foreground",children:"Selecione um pet para visualizar as estat√≠sticas"})]})})]})})}export{ce as default};
