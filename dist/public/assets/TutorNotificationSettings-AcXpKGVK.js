import{t as b,j as e,C as i,b as o,d as l,z as j,f as r,a as m}from"./index-DG0yx2hi.js";import{T as N}from"./TutorLayout-lMG2oLBz.js";import{S as y}from"./switch-DwIsyt3g.js";import{B as k}from"./popover-Bqiz4euq.js";import{S as x}from"./shield-alert-TzURb-V9.js";import{I as C}from"./info-DReA-lTp.js";import"./NotificationBell-BIuiN9Fe.js";import"./pt-BR-BIS3WgEC.js";import"./message-square-COhalQ2E.js";import"./chart-column-B4FPjduw.js";import"./package-CC5WVNv6.js";import"./user-B4BzRHVK.js";import"./index-r4-iOF84.js";const c=[{value:"vaccine_reminder_7d",label:"Lembrete de Vacina (7 dias antes)",description:"Receba um lembrete uma semana antes da vacina do seu pet vencer"},{value:"vaccine_reminder_1d",label:"Lembrete de Vacina (1 dia antes)",description:"Receba um lembrete um dia antes da vacina do seu pet vencer"},{value:"medication_reminder",label:"Lembrete de Medicamento",description:"Receba lembretes dos horários de medicação do seu pet"},{value:"checkin_notification",label:"Notificação de Check-in",description:"Seja notificado quando seu pet chegar na creche"},{value:"checkout_notification",label:"Notificação de Check-out",description:"Seja notificado quando seu pet sair da creche"},{value:"daily_report",label:"Relatório Diário",description:"Receba um resumo diário das atividades do seu pet na creche"},{value:"credits_low",label:"Créditos Baixos",description:"Seja alertado quando os créditos de creche estiverem acabando"},{value:"event_reminder",label:"Lembrete de Eventos",description:"Receba lembretes de eventos agendados para seu pet"}];function V(){const{data:n,isLoading:v,refetch:g}=b.tutorPreferences.getMine.useQuery(),u=b.tutorPreferences.upsert.useMutation(),w=async(a,s)=>{try{await u.mutateAsync({notificationType:a,enabled:s}),m.success(s?"Notificação ativada":"Notificação desativada"),g()}catch(t){t.message.includes("bloqueada pelo administrador")?m.error("Esta notificação foi bloqueada pelo administrador e não pode ser alterada"):m.error(t.message||"Erro ao atualizar preferência")}};if(v)return e.jsx(N,{children:e.jsx("div",{className:"container max-w-4xl py-8 animate-fade-in",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("p",{className:"text-muted-foreground",children:"Carregando configurações..."})})})});const f=c.filter(a=>{const s=n?.find(t=>t.notificationType===a.value);return s?s.enabled:!0}).length,h=n?.filter(a=>a.adminOverride).length||0;return e.jsx(N,{children:e.jsxs("div",{className:"container max-w-4xl py-8 animate-fade-in",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Configurações de Notificações"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Escolha quais notificações você deseja receber sobre seus pets"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs(i,{children:[e.jsxs(o,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:"Notificações Ativas"}),e.jsx(j,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-2xl font-bold",children:f}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["de ",c.length," disponíveis"]})]})]}),e.jsxs(i,{children:[e.jsxs(o,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:"Notificações Desativadas"}),e.jsx(j,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(r,{children:e.jsx("div",{className:"text-2xl font-bold",children:c.length-f})})]}),e.jsxs(i,{children:[e.jsxs(o,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:"Bloqueadas pelo Admin"}),e.jsx(x,{className:"h-4 w-4 text-orange-600"})]}),e.jsx(r,{children:e.jsx("div",{className:"text-2xl font-bold",children:h})})]})]}),e.jsx(i,{className:"mb-6 border-blue-200 bg-blue-50/50 dark:bg-blue-950/20",children:e.jsx(r,{className:"pt-6",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(C,{className:"h-5 w-5 text-blue-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-blue-900 dark:text-blue-100",children:"Sobre as notificações"}),e.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:"As notificações são enviadas automaticamente para mantê-lo informado sobre a saúde e bem-estar do seu pet. Você pode ativar ou desativar cada tipo de notificação conforme sua preferência."})]})]})})}),e.jsx("div",{className:"space-y-4",children:c.map(a=>{const s=n?.find(d=>d.notificationType===a.value),t=s?s.enabled:!0,p=s?.adminOverride||!1;return e.jsx(i,{className:"hover-lift",children:e.jsx(r,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-semibold",children:a.label}),p&&e.jsxs(k,{variant:"destructive",className:"text-xs",children:[e.jsx(x,{className:"h-3 w-3 mr-1"}),"Bloqueado"]})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a.description})]}),e.jsx(y,{checked:t,onCheckedChange:d=>w(a.value,d),disabled:p||u.isPending})]})})},a.value)})}),h>0&&e.jsx(i,{className:"mt-6 border-orange-200 bg-orange-50/50 dark:bg-orange-950/20",children:e.jsx(r,{className:"pt-6",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(x,{className:"h-5 w-5 text-orange-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-orange-900 dark:text-orange-100",children:"Notificações bloqueadas"}),e.jsx("p",{className:"text-sm text-orange-700 dark:text-orange-300",children:"Algumas notificações foram bloqueadas pelo administrador e não podem ser alteradas. Entre em contato com a creche se tiver dúvidas."})]})]})})})]})})}export{V as default};
