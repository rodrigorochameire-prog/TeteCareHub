import{r as h,t as n,a as l,j as e,C as p,f as u,b as N,D as b,d as w,e as C,n as P,B as d,o as y,p as A,q as D,s as k,v as B,w as T}from"./index-DG0yx2hi.js";import{A as S}from"./AdminLayout-CapzJ-JK.js";import{B as j}from"./popover-Bqiz4euq.js";import{C as g}from"./circle-check-big-DKLrYCYd.js";import{C as E}from"./clock-BQzFMz2h.js";import{W as R}from"./weight-rDaieWui.js";import{S as O}from"./shopping-bag-B54fr_Tl.js";import{C as z}from"./circle-x-Ewhe70CR.js";import"./scroll-area-C0S6gB82.js";import"./index-BdQq_4o_.js";import"./layout-dashboard-CC4g-mOh.js";import"./wallet-CKmMh37E.js";import"./users-DD1qYPM2.js";import"./user-B4BzRHVK.js";function V(){const[r,t]=h.useState(null),[o,i]=h.useState(null),x=n.useUtils(),{data:a,isLoading:f}=n.pets.listPending.useQuery(),c=n.pets.approve.useMutation({onSuccess:()=>{l.success("Pet aprovado com sucesso!"),t(null),i(null),x.pets.listPending.invalidate()},onError:s=>{l.error(`Erro ao aprovar pet: ${s.message}`)}}),m=n.pets.reject.useMutation({onSuccess:()=>{l.success("Pet rejeitado. O tutor foi notificado."),t(null),i(null),x.pets.listPending.invalidate()},onError:s=>{l.error(`Erro ao rejeitar pet: ${s.message}`)}}),v=()=>{r&&(o==="approve"?c.mutate({petId:r.id}):o==="reject"&&m.mutate({petId:r.id}))};return f?e.jsx("div",{className:"container py-8",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-8 bg-muted rounded w-1/3"}),e.jsx("div",{className:"h-32 bg-muted rounded"})]})}):e.jsx(S,{children:e.jsxs("div",{className:"container py-8 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Aprovações Pendentes"}),a&&a.length>0&&e.jsxs(j,{className:"bg-yellow-500/10 text-yellow-700 border-yellow-500/20",children:[a.length," ",a.length===1?"pet":"pets"]})]}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Revise e aprove os pets cadastrados pelos tutores"})]}),!a||a.length===0?e.jsx(p,{className:"border-dashed",children:e.jsxs(u,{className:"flex flex-col items-center justify-center py-16",children:[e.jsx(g,{className:"h-16 w-16 text-green-500/50 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Nenhum pet pendente"}),e.jsx("p",{className:"text-muted-foreground text-center",children:"Todos os pets cadastrados já foram aprovados ou rejeitados"})]})}):e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:a.map(s=>e.jsxs(p,{className:"overflow-hidden hover:shadow-lg transition-shadow",children:[e.jsx(N,{className:"pb-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[s.photoUrl?e.jsx("img",{src:s.photoUrl,alt:s.name,className:"h-12 w-12 rounded-full object-cover"}):e.jsx("div",{className:"h-12 w-12 rounded-full bg-gradient-to-br from-orange-400 to-orange-600 flex items-center justify-center",children:e.jsx(b,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx(w,{className:"text-xl",children:s.name}),s.breed&&e.jsx(C,{className:"mt-1",children:s.breed})]})]}),e.jsxs(j,{className:"bg-yellow-500/10 text-yellow-700 border-yellow-500/20",children:[e.jsx(E,{className:"h-3 w-3 mr-1"}),"Pendente"]})]})}),e.jsxs(u,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[s.age&&e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(P,{className:"h-4 w-4"}),e.jsx("span",{children:s.age})]}),s.weight&&e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(R,{className:"h-4 w-4"}),e.jsxs("span",{children:[(s.weight/1e3).toFixed(1)," kg"]})]})]}),s.foodBrand&&e.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[e.jsx(O,{className:"h-4 w-4 text-muted-foreground mt-0.5"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Ração:"})," ",s.foodBrand,s.foodAmount&&e.jsxs("span",{className:"text-muted-foreground",children:[" (",s.foodAmount,"g/dia)"]})]})]}),s.notes&&e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"Observações:"}),e.jsx("p",{className:"text-muted-foreground mt-1 line-clamp-2",children:s.notes})]}),s.tutorName&&e.jsxs("div",{className:"pt-3 border-t text-sm text-muted-foreground",children:[e.jsx("span",{className:"font-medium",children:"Tutor:"})," ",s.tutorName]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsxs(d,{variant:"outline",size:"sm",className:"flex-1 border-green-500/20 text-green-700 hover:bg-green-500/10",onClick:()=>{t(s),i("approve")},children:[e.jsx(g,{className:"h-4 w-4 mr-1"}),"Aprovar"]}),e.jsxs(d,{variant:"outline",size:"sm",className:"flex-1 border-red-500/20 text-red-700 hover:bg-red-500/10",onClick:()=>{t(s),i("reject")},children:[e.jsx(z,{className:"h-4 w-4 mr-1"}),"Rejeitar"]})]})]})]},s.id))}),e.jsx(y,{open:!!r,onOpenChange:()=>{t(null),i(null)},children:e.jsxs(A,{children:[e.jsxs(D,{children:[e.jsx(k,{children:o==="approve"?"Aprovar Pet":"Rejeitar Pet"}),e.jsx(B,{children:o==="approve"?`Tem certeza que deseja aprovar ${r?.name}? O tutor será notificado e poderá começar a usar os serviços da creche.`:`Tem certeza que deseja rejeitar ${r?.name}? O tutor será notificado e poderá editar as informações para reenviar.`})]}),e.jsxs(T,{children:[e.jsx(d,{variant:"outline",onClick:()=>{t(null),i(null)},children:"Cancelar"}),e.jsx(d,{onClick:v,disabled:c.isPending||m.isPending,className:o==="reject"?"bg-red-600 hover:bg-red-700":"",children:c.isPending||m.isPending?"Processando...":o==="approve"?"Confirmar Aprovação":"Confirmar Rejeição"})]})]})})]})})}export{V as default};
