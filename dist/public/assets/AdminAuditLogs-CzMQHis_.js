import{t as l,j as e,C as u,b as j,d as p,e as f,f as N,i as g}from"./index-DG0yx2hi.js";import{A}from"./AdminLayout-CapzJ-JK.js";import{F as o,B as y}from"./popover-Bqiz4euq.js";import{T as b,a as T,b as c,c as r,d as v,e as t}from"./table-DeOYaLOA.js";import{S as C}from"./scroll-area-C0S6gB82.js";import{T as w}from"./trash-2-6I2MbiK3.js";import{U}from"./user-minus-Bdea9KUv.js";import{U as H}from"./user-plus-DWTF4nUO.js";import{U as I}from"./user-B4BzRHVK.js";import{f as R,p as D}from"./pt-BR-BIS3WgEC.js";import"./layout-dashboard-CC4g-mOh.js";import"./wallet-CKmMh37E.js";import"./users-DD1qYPM2.js";import"./index-BdQq_4o_.js";const L={promote_admin:{label:"Promover Admin",icon:H,color:"text-green-600"},demote_admin:{label:"Remover Admin",icon:U,color:"text-orange-600"},delete_user:{label:"Deletar Usuário",icon:w,color:"text-red-600"}};function K(){const{data:i,isLoading:m}=l.adminLogs.list.useQuery({limit:100}),{data:x}=l.userManagement.list.useQuery(),h=s=>x?.find(d=>d.id===s)?.name||`Usuário #${s}`;return e.jsx(A,{children:e.jsxs("div",{className:"container max-w-7xl py-8 space-y-6 animate-fade-in",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Logs de Auditoria"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Auditoria de ações críticas realizadas por administradores"})]}),e.jsxs(u,{children:[e.jsxs(j,{children:[e.jsxs(p,{className:"flex items-center gap-2",children:[e.jsx(o,{className:"h-5 w-5"}),"Histórico de Ações Administrativas"]}),e.jsxs(f,{children:[i?.length||0," ações registradas"]})]}),e.jsx(N,{children:m?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Carregando logs..."}):!i||i.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(g,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Nenhum log registrado ainda"})]}):e.jsx(C,{className:"h-[600px]",children:e.jsxs(b,{children:[e.jsx(T,{children:e.jsxs(c,{children:[e.jsx(r,{children:"Data/Hora"}),e.jsx(r,{children:"Administrador"}),e.jsx(r,{children:"Ação"}),e.jsx(r,{children:"Alvo"}),e.jsx(r,{children:"Detalhes"}),e.jsx(r,{children:"IP"})]})}),e.jsx(v,{children:i.map(s=>{const n=L[s.action]||{label:s.action,icon:o,color:"text-gray-600"},d=n.icon;let a=null;try{a=s.details?JSON.parse(s.details):null}catch{a=null}return e.jsxs(c,{children:[e.jsx(t,{className:"font-mono text-xs",children:R(new Date(s.createdAt),"dd/MM/yyyy HH:mm:ss",{locale:D})}),e.jsx(t,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:h(s.adminId)})]})}),e.jsx(t,{children:e.jsxs(y,{variant:"outline",className:n.color,children:[e.jsx(d,{className:"h-3 w-3 mr-1"}),n.label]})}),e.jsx(t,{children:s.targetType&&s.targetId&&e.jsxs("span",{className:"text-sm text-muted-foreground",children:[s.targetType," #",s.targetId]})}),e.jsx(t,{children:a&&e.jsxs("div",{className:"text-xs text-muted-foreground max-w-xs truncate",children:[a.email&&`Email: ${a.email}`,a.newRole&&`Novo papel: ${a.newRole}`]})}),e.jsx(t,{className:"font-mono text-xs text-muted-foreground",children:s.ipAddress||"-"})]},s.id)})})]})})})]})]})})}export{K as default};
