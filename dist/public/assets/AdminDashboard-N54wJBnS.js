import{r as A,t as h,j as e,C as t,b as r,d,D as f,f as n,c as R,i as j,e as x,B as l,L as i,n as v,S}from"./index-DG0yx2hi.js";import{B as m,S as V,P as L}from"./popover-Bqiz4euq.js";import{A as b}from"./AdminLayout-CapzJ-JK.js";import{H as T}from"./HealthBehaviorModal-By63wK8n.js";import{T as w}from"./trending-up-C2VanZIM.js";import{P as M}from"./plus-DIKUpKHa.js";import{A as B}from"./activity-DL-_hozy.js";import{C as q}from"./clock-BQzFMz2h.js";import"./scroll-area-C0S6gB82.js";import"./index-BdQq_4o_.js";import"./layout-dashboard-CC4g-mOh.js";import"./wallet-CKmMh37E.js";import"./users-DD1qYPM2.js";import"./user-B4BzRHVK.js";import"./textarea-BfRN5q_Y.js";import"./select-k5kl2mY3.js";import"./index-r4-iOF84.js";import"./chevron-down-CKVtRMqG.js";import"./check-DDByOptX.js";import"./smile-Bn_kV9F9.js";function te(){const[y,p]=A.useState(!1),{data:u,isLoading:C}=h.dashboard.stats.useQuery(),{data:g,isLoading:D}=h.pets.list.useQuery(),{data:c}=h.vaccines.upcoming.useQuery({daysAhead:30}),{data:a}=h.healthStats.getDashboardStats.useQuery(),o=g?.filter(s=>s.status==="checked-in")||[];return g?.filter(s=>s.status==="checked-out"),C||D?e.jsx(b,{children:e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})}):e.jsxs(b,{children:[e.jsxs("div",{className:"space-y-8 animate-fade-in",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h1",{className:"text-4xl font-bold tracking-tight",children:"Dashboard"}),e.jsx("p",{className:"text-lg text-muted-foreground",children:"Visão geral da creche e gestão de pets"})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(t,{className:"shadow-card hover:shadow-hover transition-smooth border-border/50",children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-3",children:[e.jsx(d,{className:"text-sm font-medium text-muted-foreground",children:"Total de Pets"}),e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsx(f,{className:"h-5 w-5 text-primary"})})]}),e.jsxs(n,{children:[e.jsx("div",{className:"text-3xl font-bold",children:u?.totalPets||0}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Cadastrados na plataforma"})]})]}),e.jsxs(t,{className:"shadow-card hover:shadow-hover transition-smooth border-border/50",children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-3",children:[e.jsx(d,{className:"text-sm font-medium text-muted-foreground",children:"Na Creche"}),e.jsx("div",{className:"p-2 bg-green-500/10 rounded-lg",children:e.jsx(R,{className:"h-5 w-5 text-green-600"})})]}),e.jsxs(n,{children:[e.jsx("div",{className:"text-3xl font-bold text-green-600",children:u?.checkedIn||0}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Pets presentes hoje"})]})]}),e.jsxs(t,{className:"shadow-card hover:shadow-hover transition-smooth border-border/50",children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-3",children:[e.jsx(d,{className:"text-sm font-medium text-muted-foreground",children:"Receita Mensal"}),e.jsx("div",{className:"p-2 bg-blue-500/10 rounded-lg",children:e.jsx(w,{className:"h-5 w-5 text-blue-600"})})]}),e.jsxs(n,{children:[e.jsxs("div",{className:"text-3xl font-bold",children:["R$ ",((u?.monthlyRevenue||0)/100).toFixed(2)]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Mês atual"})]})]}),e.jsxs(t,{className:"shadow-card hover:shadow-hover transition-smooth border-border/50",children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-3",children:[e.jsx(d,{className:"text-sm font-medium text-muted-foreground",children:"Vacinas Próximas"}),e.jsx("div",{className:"p-2 bg-orange-500/10 rounded-lg",children:e.jsx(j,{className:"h-5 w-5 text-orange-600"})})]}),e.jsxs(n,{children:[e.jsx("div",{className:"text-3xl font-bold text-orange-600",children:c?.length||0}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Próximos 30 dias"})]})]})]}),e.jsxs(t,{className:"shadow-card border-border/50",children:[e.jsx(r,{className:"pb-4",children:e.jsxs("div",{children:[e.jsx(d,{className:"text-xl",children:"Registro Rápido"}),e.jsx(x,{className:"mt-1.5",children:"Registre humor, fezes e comportamento dos pets na creche"})]})}),e.jsx(n,{children:o.length===0?e.jsx("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Nenhum pet na creche para registrar"})}):e.jsxs(l,{onClick:()=>p(!0),size:"lg",className:"w-full md:w-auto",children:[e.jsx(M,{className:"mr-2 h-5 w-5"}),"Novo Registro de Saúde"]})})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs(t,{className:"shadow-card border-border/50",children:[e.jsx(r,{className:"pb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(d,{className:"text-xl",children:"Pets na Creche"}),e.jsx(x,{className:"mt-1.5",children:"Pets que fizeram check-in hoje"})]}),e.jsx(m,{variant:"secondary",className:"text-base px-3 py-1",children:o.length})]})}),e.jsx(n,{children:o.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx("div",{className:"p-4 bg-muted/50 rounded-full mb-4",children:e.jsx(f,{className:"h-12 w-12 text-muted-foreground"})}),e.jsx("p",{className:"text-lg font-medium text-muted-foreground mb-2",children:"Nenhum pet na creche"}),e.jsx("p",{className:"text-sm text-muted-foreground max-w-sm",children:"Faça o check-in dos pets quando chegarem"})]}):e.jsxs("div",{className:"space-y-3",children:[o.slice(0,3).map(s=>e.jsx(i,{href:`/admin/pets/${s.id}`,children:e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border border-border/50 hover:bg-accent/50 transition-smooth cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-primary flex items-center justify-center text-white font-semibold",children:s.name[0]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.breed})]})]}),e.jsx(m,{variant:"default",className:"bg-green-500/10 text-green-700 hover:bg-green-500/20",children:"Na creche"})]})},s.id)),o.length>3&&e.jsx(i,{href:"/admin/pets",children:e.jsxs(l,{variant:"outline",className:"w-full mt-4",children:["Ver todos (",o.length,")"]})})]})})]}),e.jsxs(t,{className:"shadow-card border-border/50",children:[e.jsx(r,{className:"pb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(d,{className:"text-xl",children:"Vacinas Próximas"}),e.jsx(x,{className:"mt-1.5",children:"Vacinas agendadas para os próximos 30 dias"})]}),e.jsx(m,{variant:"secondary",className:"text-base px-3 py-1",children:c?.length||0})]})}),e.jsx(n,{children:!c||c.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx("div",{className:"p-4 bg-muted/50 rounded-full mb-4",children:e.jsx(v,{className:"h-12 w-12 text-muted-foreground"})}),e.jsx("p",{className:"text-lg font-medium text-muted-foreground mb-2",children:"Nenhuma vacina agendada"}),e.jsx("p",{className:"text-sm text-muted-foreground max-w-sm",children:"Todas as vacinas estão em dia"})]}):e.jsxs("div",{className:"space-y-3",children:[c.slice(0,3).map(s=>e.jsx("div",{className:"p-4 rounded-lg border border-border/50 hover:bg-accent/50 transition-smooth",children:e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.pet.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.vaccine.name})]}),e.jsx(m,{variant:"outline",className:"text-orange-600 border-orange-200",children:new Date(s.vaccination.nextDueDate).toLocaleDateString("pt-BR")})]})},s.vaccination.id)),c.length>3&&e.jsx(i,{href:"/admin/vaccines",children:e.jsxs(l,{variant:"outline",className:"w-full mt-4",children:["Ver todas (",c.length,")"]})})]})})]})]}),a&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(B,{className:"h-6 w-6 text-primary"}),"Estatísticas de Saúde"]}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Visão geral da saúde dos pets"})]}),e.jsx(i,{href:"/admin/health-notifications",children:e.jsxs(l,{variant:"outline",children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),"Ver Notificações"]})})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(t,{className:"shadow-card hover:shadow-hover transition-smooth",children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Taxa de Vacinação"}),e.jsx(V,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(n,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[a.vaccination.rate,"%"]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[a.vaccination.upToDate," de ",a.vaccination.total," pets em dia"]}),e.jsxs("div",{className:"mt-3 flex gap-2 text-xs",children:[a.vaccination.overdue>0&&e.jsxs(m,{variant:"destructive",className:"text-xs",children:[a.vaccination.overdue," atrasados"]}),a.vaccination.upcoming>0&&e.jsxs(m,{variant:"outline",className:"text-xs",children:[a.vaccination.upcoming," próximos"]})]})]})]}),e.jsxs(t,{className:"shadow-card hover:shadow-hover transition-smooth",children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Medicamentos Ativos"}),e.jsx(L,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(n,{children:[e.jsx("div",{className:"text-2xl font-bold",children:a.medications.total}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[a.medications.byPet.length," pets em tratamento"]})]})]}),e.jsxs(t,{className:"shadow-card hover:shadow-hover transition-smooth",children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Preventivos no Mês"}),e.jsx(S,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(n,{children:[e.jsx("div",{className:"text-2xl font-bold",children:a.preventives.total}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[a.preventives.flea," antipulgas, ",a.preventives.deworming," vermífugos"]})]})]}),e.jsxs(t,{className:"shadow-card hover:shadow-hover transition-smooth",children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium",children:"Tratamentos Atrasados"}),e.jsx(j,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(n,{children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:a.overdue.length}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Requerem atenção imediata"})]})]})]}),a.overdue.length>0&&e.jsxs(t,{className:"shadow-card border-orange-200 dark:border-orange-800",children:[e.jsxs(r,{children:[e.jsxs(d,{className:"text-lg flex items-center gap-2",children:[e.jsx(j,{className:"h-5 w-5 text-orange-600"}),"Tratamentos Atrasados"]}),e.jsxs(x,{children:[a.overdue.length," ",a.overdue.length===1?"tratamento atrasado":"tratamentos atrasados"," que requerem atenção"]})]}),e.jsx(n,{children:e.jsxs("div",{className:"space-y-2",children:[a.overdue.slice(0,5).map((s,P)=>{const N=Math.floor((new Date().getTime()-new Date(s.dueDate).getTime())/864e5),k={vaccination:"Vacina",flea:"Antipulgas",deworming:"Vermífugo"};return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-orange-50 dark:bg-orange-950 rounded-lg border border-orange-200 dark:border-orange-800",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:s.petName}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[k[s.type],": ",s.itemName]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs(m,{variant:"destructive",className:"text-xs",children:[N," ",N===1?"dia":"dias"," atrasado"]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:new Date(s.dueDate).toLocaleDateString("pt-BR")})]})]},P)}),a.overdue.length>5&&e.jsxs("p",{className:"text-sm text-muted-foreground text-center pt-2",children:["+",a.overdue.length-5," mais"]})]})})]})]}),e.jsxs(t,{className:"shadow-card border-border/50",children:[e.jsxs(r,{children:[e.jsx(d,{className:"text-xl",children:"Ações Rápidas"}),e.jsx(x,{className:"mt-1.5",children:"Acesso rápido às funcionalidades principais"})]}),e.jsx(n,{children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(i,{href:"/admin/pets/new",children:e.jsxs(l,{variant:"outline",className:"w-full h-auto py-4 flex-col gap-2 hover-lift",children:[e.jsx(f,{className:"h-6 w-6"}),e.jsx("span",{children:"Novo Pet"})]})}),e.jsx(i,{href:"/admin/logs",children:e.jsxs(l,{variant:"outline",className:"w-full h-auto py-4 flex-col gap-2 hover-lift",children:[e.jsx(q,{className:"h-6 w-6"}),e.jsx("span",{children:"Registrar Log"})]})}),e.jsx(i,{href:"/admin/calendar",children:e.jsxs(l,{variant:"outline",className:"w-full h-auto py-4 flex-col gap-2 hover-lift",children:[e.jsx(v,{className:"h-6 w-6"}),e.jsx("span",{children:"Calendário"})]})}),e.jsx(i,{href:"/admin/finances",children:e.jsxs(l,{variant:"outline",className:"w-full h-auto py-4 flex-col gap-2 hover-lift",children:[e.jsx(w,{className:"h-6 w-6"}),e.jsx("span",{children:"Finanças"})]})})]})})]})]}),e.jsx(T,{open:y,onOpenChange:p,pets:o.map(s=>({id:s.id,name:s.name})),onSuccess:()=>{}})]})}export{te as default};
