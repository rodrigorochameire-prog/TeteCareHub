import{t,a as n,j as s,C as r,b as d,d as o,f as c,e as N,n as g,B as y}from"./index-DG0yx2hi.js";import{T as m}from"./TutorLayout-lMG2oLBz.js";import{C as x}from"./check-DDByOptX.js";import{P as b}from"./package-CC5WVNv6.js";import{C as v}from"./credit-card-CxD7Buqp.js";import"./popover-Bqiz4euq.js";import"./NotificationBell-BIuiN9Fe.js";import"./pt-BR-BIS3WgEC.js";import"./info-DReA-lTp.js";import"./message-square-COhalQ2E.js";import"./chart-column-B4FPjduw.js";import"./user-B4BzRHVK.js";function V(){const{data:i,isLoading:p}=t.plans.list.useQuery({activeOnly:!0}),{data:a}=t.subscriptions.getActive.useQuery(),u=t.useUtils(),l=t.subscriptions.subscribe.useMutation({onSuccess:()=>{n.success("Assinatura realizada com sucesso!"),u.subscriptions.getActive.invalidate()},onError:e=>{n.error("Erro ao assinar: "+e.message)}}),h=e=>{confirm("Deseja assinar este plano?")&&l.mutate({planId:e})};return p?s.jsx(m,{children:s.jsx("div",{className:"container py-8",children:s.jsx("p",{children:"Carregando planos..."})})}):s.jsx(m,{children:s.jsxs("div",{className:"container py-8 space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Planos de Assinatura"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Escolha o melhor plano para seu pet"})]}),a&&s.jsxs(r,{className:"border-primary/50 bg-primary/5",children:[s.jsx(d,{children:s.jsxs(o,{className:"flex items-center gap-2",children:[s.jsx(x,{className:"h-5 w-5 text-primary"}),"Assinatura Ativa"]})}),s.jsx(c,{children:s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Você possui uma assinatura ativa. Renova em:"," ",new Date(a.endDate).toLocaleDateString("pt-BR")]})})]}),!i||i.length===0?s.jsx(r,{children:s.jsxs(c,{className:"empty-state",children:[s.jsx(b,{className:"empty-state-icon"}),s.jsx("p",{className:"empty-state-title",children:"Nenhum plano disponível"}),s.jsx("p",{className:"empty-state-description",children:"Aguarde novos planos serem criados pela creche"})]})}):s.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:i.map(e=>s.jsxs(r,{className:"shadow-card border-border/50 flex flex-col",children:[s.jsxs(d,{children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(o,{className:"text-2xl",children:e.name}),e.description&&s.jsx(N,{children:e.description})]}),s.jsxs("div",{className:"pt-4",children:[s.jsxs("p",{className:"text-4xl font-bold",children:["R$ ",(e.price/100).toFixed(2)]}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["por ",e.validityDays," dias"]})]})]}),s.jsxs(c,{className:"space-y-4 flex-1 flex flex-col",children:[s.jsxs("div",{className:"space-y-3 flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(v,{className:"h-4 w-4 text-primary"}),s.jsxs("span",{className:"font-medium",children:[e.credits," diárias incluídas"]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(g,{className:"h-4 w-4 text-primary"}),s.jsxs("span",{className:"font-medium",children:["Válido por ",e.validityDays," dias"]})]}),e.benefits&&s.jsxs("div",{className:"pt-4 border-t",children:[s.jsx("p",{className:"text-sm font-medium mb-2",children:"Benefícios:"}),s.jsx("ul",{className:"text-sm text-muted-foreground space-y-1",children:e.benefits.split(`
`).map((j,f)=>s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(x,{className:"h-4 w-4 text-primary mt-0.5 flex-shrink-0"}),s.jsx("span",{children:j})]},f))})]})]}),s.jsx(y,{className:"w-full mt-auto",disabled:!!a||l.isPending,onClick:()=>h(e.id),children:a?"Você já tem uma assinatura":"Assinar Plano"})]})]},e.id))})]})})}export{V as default};
