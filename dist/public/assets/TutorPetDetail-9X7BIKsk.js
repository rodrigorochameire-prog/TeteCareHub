import{R as p,az as Ae,r as Z,t as T,j as e,C as f,b as N,d as w,e as O,f as j,l as fe,X as Ee,B as R,a as J,aE as Re,D as Te,L as E,n as je}from"./index-DG0yx2hi.js";import{T as ne}from"./TutorLayout-lMG2oLBz.js";import{A as De,m as Pe,c as Ce,B as _,F as te,P as Be,S as oe}from"./popover-Bqiz4euq.js";import{T as Fe,a as _e,b as W,c as q}from"./tabs-sUy1g-fW.js";import{d as H,k as Y,J as ae,v as U,o as le,A as Me,u as K,q as ve,K as Ie,M as Ve,w as ze,x as $e,i as ce,G as We,s as ye,N as ge,D as qe,g as He,X as re,Y as ie,f as Ke,R as me,L as Ue,C as ue,T as he,a as Ge,B as Qe}from"./LineChart-CD6pLqis.js";import{B as Xe}from"./BarChart-C1UGB1Aa.js";import{S as be}from"./findIndex-Ckvz6Jh7.js";import{C as Ye}from"./camera-Br2FVmP9.js";import{P as Je}from"./PhotoGalleryTimeline-Bt6FRxK9.js";import{D as Ze,W as et}from"./WhatsAppContactButton-DD3dD6HK.js";import{D as tt}from"./DocumentViewer-DvseRbVf.js";import{A as at}from"./arrow-left-B-xkxJNp.js";import"./NotificationBell-BIuiN9Fe.js";import"./pt-BR-BIS3WgEC.js";import"./info-DReA-lTp.js";import"./message-square-COhalQ2E.js";import"./chart-column-B4FPjduw.js";import"./package-CC5WVNv6.js";import"./user-B4BzRHVK.js";import"./textarea-BfRN5q_Y.js";import"./upload-Ck_fQFtx.js";import"./trash-2-6I2MbiK3.js";import"./meh-DzyMYYW6.js";import"./activity-DL-_hozy.js";import"./smile-Bn_kV9F9.js";import"./utensils-CgVj1FvD.js";import"./send-BU_qFC5s.js";import"./select-k5kl2mY3.js";import"./index-BdQq_4o_.js";import"./index-r4-iOF84.js";import"./chevron-down-CKVtRMqG.js";import"./check-DDByOptX.js";import"./download-DIpAs7NP.js";import"./square-pen-D7F5zf6L.js";import"./image-BoirZu0B.js";import"./chevron-left-DzbQ4jE-.js";import"./chevron-right-DecBlSPI.js";var st=["layout","type","stroke","connectNulls","isRange","ref"],rt=["key"],Oe;function G(a){"@babel/helpers - typeof";return G=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},G(a)}function ke(a,t){if(a==null)return{};var n=it(a,t),s,r;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(a);for(r=0;r<l.length;r++)s=l[r],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(a,s)&&(n[s]=a[s])}return n}function it(a,t){if(a==null)return{};var n={};for(var s in a)if(Object.prototype.hasOwnProperty.call(a,s)){if(t.indexOf(s)>=0)continue;n[s]=a[s]}return n}function z(){return z=Object.assign?Object.assign.bind():function(a){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(a[s]=n[s])}return a},z.apply(this,arguments)}function Ne(a,t){var n=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(a,r).enumerable})),n.push.apply(n,s)}return n}function M(a){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ne(Object(n),!0).forEach(function(s){L(a,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(n)):Ne(Object(n)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(n,s))})}return a}function nt(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function we(a,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(a,Se(s.key),s)}}function ot(a,t,n){return t&&we(a.prototype,t),n&&we(a,n),Object.defineProperty(a,"prototype",{writable:!1}),a}function lt(a,t,n){return t=se(t),ct(a,Le()?Reflect.construct(t,n||[],se(a).constructor):t.apply(a,n))}function ct(a,t){if(t&&(G(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dt(a)}function dt(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Le(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Le=function(){return!!a})()}function se(a){return se=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},se(a)}function mt(a,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(t&&t.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),t&&de(a,t)}function de(a,t){return de=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,r){return s.__proto__=r,s},de(a,t)}function L(a,t,n){return t=Se(t),t in a?Object.defineProperty(a,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):a[t]=n,a}function Se(a){var t=ut(a,"string");return G(t)=="symbol"?t:t+""}function ut(a,t){if(G(a)!="object"||!a)return a;var n=a[Symbol.toPrimitive];if(n!==void 0){var s=n.call(a,t);if(G(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(a)}var I=(function(a){function t(){var n;nt(this,t);for(var s=arguments.length,r=new Array(s),l=0;l<s;l++)r[l]=arguments[l];return n=lt(this,t,[].concat(r)),L(n,"state",{isAnimationFinished:!0}),L(n,"id",$e("recharts-area-")),L(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),ce(o)&&o()}),L(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),ce(o)&&o()}),n}return mt(t,a),ot(t,[{key:"renderDots",value:function(s,r,l){var o=this.props.isAnimationActive,c=this.state.isAnimationFinished;if(o&&!c)return null;var d=this.props,m=d.dot,u=d.points,i=d.dataKey,h=H(this.props,!1),x=H(m,!0),v=u.map(function(y,k){var D=M(M(M({key:"dot-".concat(k),r:3},h),x),{},{index:k,cx:y.x,cy:y.y,dataKey:i,value:y.value,payload:y.payload,points:u});return t.renderDotItem(m,D)}),A={clipPath:s?"url(#clipPath-".concat(r?"":"dots-").concat(l,")"):null};return p.createElement(Y,z({className:"recharts-area-dots"},A),v)}},{key:"renderHorizontalRect",value:function(s){var r=this.props,l=r.baseLine,o=r.points,c=r.strokeWidth,d=o[0].x,m=o[o.length-1].x,u=s*Math.abs(d-m),i=ae(o.map(function(h){return h.y||0}));return U(l)&&typeof l=="number"?i=Math.max(l,i):l&&Array.isArray(l)&&l.length&&(i=Math.max(ae(l.map(function(h){return h.y||0})),i)),U(i)?p.createElement("rect",{x:d<m?d:d-u,y:0,width:u,height:Math.floor(i+(c?parseInt("".concat(c),10):1))}):null}},{key:"renderVerticalRect",value:function(s){var r=this.props,l=r.baseLine,o=r.points,c=r.strokeWidth,d=o[0].y,m=o[o.length-1].y,u=s*Math.abs(d-m),i=ae(o.map(function(h){return h.x||0}));return U(l)&&typeof l=="number"?i=Math.max(l,i):l&&Array.isArray(l)&&l.length&&(i=Math.max(ae(l.map(function(h){return h.x||0})),i)),U(i)?p.createElement("rect",{x:0,y:d<m?d:d-u,width:i+(c?parseInt("".concat(c),10):1),height:Math.floor(u)}):null}},{key:"renderClipRect",value:function(s){var r=this.props.layout;return r==="vertical"?this.renderVerticalRect(s):this.renderHorizontalRect(s)}},{key:"renderAreaStatically",value:function(s,r,l,o){var c=this.props,d=c.layout,m=c.type,u=c.stroke,i=c.connectNulls,h=c.isRange;c.ref;var x=ke(c,st);return p.createElement(Y,{clipPath:l?"url(#clipPath-".concat(o,")"):null},p.createElement(le,z({},H(x,!0),{points:s,connectNulls:i,type:m,baseLine:r,layout:d,stroke:"none",className:"recharts-area-area"})),u!=="none"&&p.createElement(le,z({},H(this.props,!1),{className:"recharts-area-curve",layout:d,type:m,connectNulls:i,fill:"none",points:s})),u!=="none"&&h&&p.createElement(le,z({},H(this.props,!1),{className:"recharts-area-curve",layout:d,type:m,connectNulls:i,fill:"none",points:r})))}},{key:"renderAreaWithAnimation",value:function(s,r){var l=this,o=this.props,c=o.points,d=o.baseLine,m=o.isAnimationActive,u=o.animationBegin,i=o.animationDuration,h=o.animationEasing,x=o.animationId,v=this.state,A=v.prevPoints,y=v.prevBaseLine;return p.createElement(Me,{begin:u,duration:i,isActive:m,easing:h,from:{t:0},to:{t:1},key:"area-".concat(x),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(k){var D=k.t;if(A){var B=A.length/c.length,g=c.map(function(C,$){var V=Math.floor($*B);if(A[V]){var F=A[V],Q=K(F.x,C.x),X=K(F.y,C.y);return M(M({},C),{},{x:Q(D),y:X(D)})}return C}),b;if(U(d)&&typeof d=="number"){var P=K(y,d);b=P(D)}else if(ve(d)||Ie(d)){var S=K(y,0);b=S(D)}else b=d.map(function(C,$){var V=Math.floor($*B);if(y[V]){var F=y[V],Q=K(F.x,C.x),X=K(F.y,C.y);return M(M({},C),{},{x:Q(D),y:X(D)})}return C});return l.renderAreaStatically(g,b,s,r)}return p.createElement(Y,null,p.createElement("defs",null,p.createElement("clipPath",{id:"animationClipPath-".concat(r)},l.renderClipRect(D))),p.createElement(Y,{clipPath:"url(#animationClipPath-".concat(r,")")},l.renderAreaStatically(c,d,s,r)))})}},{key:"renderArea",value:function(s,r){var l=this.props,o=l.points,c=l.baseLine,d=l.isAnimationActive,m=this.state,u=m.prevPoints,i=m.prevBaseLine,h=m.totalLength;return d&&o&&o.length&&(!u&&h>0||!be(u,o)||!be(i,c))?this.renderAreaWithAnimation(s,r):this.renderAreaStatically(o,c,s,r)}},{key:"render",value:function(){var s,r=this.props,l=r.hide,o=r.dot,c=r.points,d=r.className,m=r.top,u=r.left,i=r.xAxis,h=r.yAxis,x=r.width,v=r.height,A=r.isAnimationActive,y=r.id;if(l||!c||!c.length)return null;var k=this.state.isAnimationFinished,D=c.length===1,B=Ae("recharts-area",d),g=i&&i.allowDataOverflow,b=h&&h.allowDataOverflow,P=g||b,S=ve(y)?this.id:y,C=(s=H(o,!1))!==null&&s!==void 0?s:{r:3,strokeWidth:2},$=C.r,V=$===void 0?3:$,F=C.strokeWidth,Q=F===void 0?2:F,X=Ve(o)?o:{},xe=X.clipDot,pe=xe===void 0?!0:xe,ee=V*2+Q;return p.createElement(Y,{className:B},g||b?p.createElement("defs",null,p.createElement("clipPath",{id:"clipPath-".concat(S)},p.createElement("rect",{x:g?u:u-x/2,y:b?m:m-v/2,width:g?x:x*2,height:b?v:v*2})),!pe&&p.createElement("clipPath",{id:"clipPath-dots-".concat(S)},p.createElement("rect",{x:u-ee/2,y:m-ee/2,width:x+ee,height:v+ee}))):null,D?null:this.renderArea(P,S),(o||D)&&this.renderDots(P,pe,S),(!A||k)&&ze.renderCallByParent(this.props,c))}}],[{key:"getDerivedStateFromProps",value:function(s,r){return s.animationId!==r.prevAnimationId?{prevAnimationId:s.animationId,curPoints:s.points,curBaseLine:s.baseLine,prevPoints:r.curPoints,prevBaseLine:r.curBaseLine}:s.points!==r.curPoints||s.baseLine!==r.curBaseLine?{curPoints:s.points,curBaseLine:s.baseLine}:null}}])})(Z.PureComponent);Oe=I;L(I,"displayName","Area");L(I,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!We.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});L(I,"getBaseValue",function(a,t,n,s){var r=a.layout,l=a.baseValue,o=t.props.baseValue,c=o??l;if(U(c)&&typeof c=="number")return c;var d=r==="horizontal"?s:n,m=d.scale.domain();if(d.type==="number"){var u=Math.max(m[0],m[1]),i=Math.min(m[0],m[1]);return c==="dataMin"?i:c==="dataMax"||u<0?u:Math.max(Math.min(m[0],m[1]),0)}return c==="dataMin"?m[0]:c==="dataMax"?m[1]:m[0]});L(I,"getComposedData",function(a){var t=a.props,n=a.item,s=a.xAxis,r=a.yAxis,l=a.xAxisTicks,o=a.yAxisTicks,c=a.bandSize,d=a.dataKey,m=a.stackedData,u=a.dataStartIndex,i=a.displayedData,h=a.offset,x=t.layout,v=m&&m.length,A=Oe.getBaseValue(t,n,s,r),y=x==="horizontal",k=!1,D=i.map(function(g,b){var P;v?P=m[u+b]:(P=ye(g,d),Array.isArray(P)?k=!0:P=[A,P]);var S=P[1]==null||v&&ye(g,d)==null;return y?{x:ge({axis:s,ticks:l,bandSize:c,entry:g,index:b}),y:S?null:r.scale(P[1]),value:P,payload:g}:{x:S?null:s.scale(P[1]),y:ge({axis:r,ticks:o,bandSize:c,entry:g,index:b}),value:P,payload:g}}),B;return v||k?B=D.map(function(g){var b=Array.isArray(g.value)?g.value[0]:null;return y?{x:g.x,y:b!=null&&g.y!=null?r.scale(b):null}:{x:b!=null?s.scale(b):null,y:g.y}}):B=y?r.scale(A):s.scale(A),M({points:D,baseLine:B,layout:x,isRange:k},h)});L(I,"renderDotItem",function(a,t){var n;if(p.isValidElement(a))n=p.cloneElement(a,t);else if(ce(a))n=a(t);else{var s=Ae("recharts-area-dot",typeof a!="boolean"?a.className:""),r=t.key,l=ke(t,rt);n=p.createElement(qe,z({},l,{key:r,className:s}))}return n});var ht=He({chartName:"AreaChart",GraphicalChild:I,axisComponents:[{axisType:"xAxis",AxisComp:re},{axisType:"yAxis",AxisComp:ie}],formatAxisMap:Ke});function xt({petId:a}){const{data:t,isLoading:n}=T.pets.getWeightHistory.useQuery({petId:a});if(n)return e.jsxs(f,{children:[e.jsxs(N,{children:[e.jsx(w,{children:"Evolução de Peso"}),e.jsx(O,{children:"Carregando dados..."})]}),e.jsx(j,{children:e.jsx("div",{className:"h-[300px] flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})})]});if(!t||t.length===0)return e.jsxs(f,{children:[e.jsxs(N,{children:[e.jsx(w,{children:"Evolução de Peso"}),e.jsx(O,{children:"Histórico de peso ao longo do tempo"})]}),e.jsx(j,{children:e.jsx("div",{className:"h-[300px] flex items-center justify-center text-muted-foreground",children:"Nenhum registro de peso encontrado"})})]});const s=t.map(r=>({date:new Date(r.date).toLocaleDateString("pt-BR",{day:"2-digit",month:"short"}),weight:r.weight/1e3}));return e.jsxs(f,{children:[e.jsxs(N,{children:[e.jsx(w,{children:"Evolução de Peso"}),e.jsxs(O,{children:["Histórico de peso ao longo do tempo (",s.length," registros)"]})]}),e.jsx(j,{children:e.jsx(me,{width:"100%",height:300,children:e.jsxs(Ue,{data:s,children:[e.jsx(ue,{strokeDasharray:"3 3"}),e.jsx(re,{dataKey:"date"}),e.jsx(ie,{label:{value:"Peso (kg)",angle:-90,position:"insideLeft"}}),e.jsx(he,{formatter:r=>[`${r.toFixed(1)} kg`,"Peso"],labelStyle:{color:"hsl(var(--foreground))"},contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))",borderRadius:"8px"}}),e.jsx(Ge,{type:"monotone",dataKey:"weight",stroke:"hsl(var(--primary))",strokeWidth:2,dot:{fill:"hsl(var(--primary))",r:4},activeDot:{r:6}})]})})})]})}const pt={happy:"#10b981",calm:"#3b82f6",anxious:"#f59e0b",aggressive:"#ef4444",playful:"#8b5cf6"},ft={happy:"Feliz",calm:"Calmo",anxious:"Ansioso",aggressive:"Agressivo",playful:"Brincalhão"};function jt({petId:a}){const{data:t,isLoading:n}=T.pets.getMoodHistory.useQuery({petId:a});if(n)return e.jsxs(f,{children:[e.jsxs(N,{children:[e.jsx(w,{children:"Análise de Humor"}),e.jsx(O,{children:"Carregando dados..."})]}),e.jsx(j,{children:e.jsx("div",{className:"h-[300px] flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})})]});if(!t||t.length===0)return e.jsxs(f,{children:[e.jsxs(N,{children:[e.jsx(w,{children:"Análise de Humor"}),e.jsx(O,{children:"Distribuição de humor ao longo do tempo"})]}),e.jsx(j,{children:e.jsx("div",{className:"h-[300px] flex items-center justify-center text-muted-foreground",children:"Nenhum registro de humor encontrado"})})]});const s={};t.forEach(l=>{s[l.mood]=(s[l.mood]||0)+1});const r=Object.entries(s).map(([l,o])=>({mood:ft[l]||l,count:o,fill:pt[l]||"#6b7280"}));return e.jsxs(f,{children:[e.jsxs(N,{children:[e.jsx(w,{children:"Análise de Humor"}),e.jsxs(O,{children:["Distribuição de humor (",t.length," registros)"]})]}),e.jsx(j,{children:e.jsx(me,{width:"100%",height:300,children:e.jsxs(Xe,{data:r,children:[e.jsx(ue,{strokeDasharray:"3 3"}),e.jsx(re,{dataKey:"mood"}),e.jsx(ie,{label:{value:"Ocorrências",angle:-90,position:"insideLeft"}}),e.jsx(he,{contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))",borderRadius:"8px"}}),e.jsx(Qe,{dataKey:"count",radius:[8,8,0,0]})]})})})]})}function vt({petId:a}){const{data:t,isLoading:n}=T.pets.getFrequencyStats.useQuery({petId:a});return n?e.jsxs(f,{children:[e.jsxs(N,{children:[e.jsx(w,{children:"Frequência na Creche"}),e.jsx(O,{children:"Carregando dados..."})]}),e.jsx(j,{children:e.jsx("div",{className:"h-[300px] flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})})]}):!t||t.length===0?e.jsxs(f,{children:[e.jsxs(N,{children:[e.jsx(w,{children:"Frequência na Creche"}),e.jsx(O,{children:"Dias de presença por mês"})]}),e.jsx(j,{children:e.jsx("div",{className:"h-[300px] flex items-center justify-center text-muted-foreground",children:"Nenhum registro de frequência encontrado"})})]}):e.jsxs(f,{children:[e.jsxs(N,{children:[e.jsx(w,{children:"Frequência na Creche"}),e.jsxs(O,{children:["Dias de presença por mês (",t.length," meses)"]})]}),e.jsx(j,{children:e.jsx(me,{width:"100%",height:300,children:e.jsxs(ht,{data:t,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorFrequency",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"hsl(var(--primary))",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"hsl(var(--primary))",stopOpacity:0})]})}),e.jsx(ue,{strokeDasharray:"3 3"}),e.jsx(re,{dataKey:"month"}),e.jsx(ie,{label:{value:"Dias",angle:-90,position:"insideLeft"}}),e.jsx(he,{contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))",borderRadius:"8px"}}),e.jsx(I,{type:"monotone",dataKey:"frequency",stroke:"hsl(var(--primary))",fillOpacity:1,fill:"url(#colorFrequency)"})]})})})]})}function yt({currentPhotoUrl:a,petName:t,onUploadComplete:n}){const[s,r]=Z.useState(!1),[l,o]=Z.useState(null),c=Z.useRef(null),d=async h=>{const x=h.target.files?.[0];if(!x)return;if(!x.type.startsWith("image/")){J.error("Por favor, selecione uma imagem");return}if(x.size>5*1024*1024){J.error("A imagem deve ter no máximo 5MB");return}const v=new FileReader;v.onloadend=()=>{o(v.result)},v.readAsDataURL(x),await m(x)},m=async h=>{r(!0);try{const x=new FileReader;x.onloadend=async()=>{const v=x.result,A=await fetch("/api/upload-photo",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fileName:h.name,fileType:h.type,fileData:v})});if(!A.ok)throw new Error("Erro ao fazer upload");const y=await A.json();n(y.url,y.key),J.success("Foto atualizada com sucesso!")},x.readAsDataURL(h)}catch(x){console.error("Upload error:",x),J.error("Erro ao fazer upload da foto"),o(null)}finally{r(!1)}},u=()=>{o(null),c.current&&(c.current.value="")},i=l||a;return e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsxs(De,{className:"w-32 h-32 border-4 border-background shadow-lg transition-transform group-hover:scale-105",children:[e.jsx(Pe,{src:i||void 0,alt:t}),e.jsx(Ce,{className:"text-4xl bg-gradient-primary text-white",children:t[0]})]}),s&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50 rounded-full",children:e.jsx(fe,{className:"h-8 w-8 text-white animate-spin"})}),l&&!s&&e.jsx("button",{onClick:u,className:"absolute -top-2 -right-2 p-1 bg-destructive text-destructive-foreground rounded-full shadow-lg hover:scale-110 transition-transform",children:e.jsx(Ee,{className:"h-4 w-4"})})]}),e.jsx("input",{ref:c,type:"file",accept:"image/*",onChange:d,className:"hidden"}),e.jsx("div",{className:"flex gap-2",children:e.jsx(R,{type:"button",variant:"outline",size:"sm",onClick:()=>c.current?.click(),disabled:s,children:s?e.jsxs(e.Fragment,{children:[e.jsx(fe,{className:"mr-2 h-4 w-4 animate-spin"}),"Enviando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ye,{className:"mr-2 h-4 w-4"}),a?"Alterar Foto":"Adicionar Foto"]})})}),e.jsxs("p",{className:"text-xs text-muted-foreground text-center",children:["Formatos aceitos: JPG, PNG, GIF",e.jsx("br",{}),"Tamanho máximo: 5MB"]})]})}function sa(){const[,a]=Re("/tutor/pets/:id"),t=a?.id?parseInt(a.id):0,[n,s]=Z.useState("overview"),{data:r,isLoading:l}=T.pets.byId.useQuery({id:t}),{data:o}=T.vaccines.getPetVaccinations.useQuery({petId:t}),{data:c}=T.medications.getPetMedications.useQuery({petId:t}),{data:d}=T.logs.getPetLogs.useQuery({petId:t}),{data:m}=T.documents.getPetDocuments.useQuery({petId:t}),{data:u}=T.credits.getBalance.useQuery({petId:t});return l?e.jsx(ne,{children:e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})}):r?e.jsxs(ne,{children:[e.jsxs("div",{className:"container max-w-7xl py-8 space-y-8 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(E,{href:"/tutor/dashboard",children:e.jsx(R,{variant:"ghost",size:"icon",children:e.jsx(at,{className:"h-5 w-5"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:r.name}),e.jsx("p",{className:"text-muted-foreground",children:r.breed||"Sem raça definida"})]}),e.jsx(_,{className:r.status==="checked-in"?"badge-checked-in":"badge-checked-out",children:r.status==="checked-in"?"Na creche":"Em casa"})]}),e.jsx(f,{children:e.jsxs(j,{className:"pt-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsxs(De,{className:"w-32 h-32",children:[e.jsx(Pe,{src:r.photoUrl||void 0,alt:r.name}),e.jsx(Ce,{className:"text-4xl bg-gradient-primary text-white",children:r.name[0]})]}),e.jsx(yt,{currentPhotoUrl:r.photoUrl||void 0,petName:r.name,onUploadComplete:(i,h)=>{J.success("Foto atualizada com sucesso!"),window.location.reload()}})]}),e.jsxs("div",{className:"flex-1 grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"p-4 bg-muted/50 rounded-lg",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Idade"}),e.jsx("p",{className:"text-lg font-semibold",children:r.age||"N/A"})]}),e.jsxs("div",{className:"p-4 bg-muted/50 rounded-lg",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Peso"}),e.jsx("p",{className:"text-lg font-semibold",children:r.weight?`${(r.weight/1e3).toFixed(1)}kg`:"N/A"})]}),e.jsxs("div",{className:"p-4 bg-muted/50 rounded-lg",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Ração"}),e.jsx("p",{className:"text-sm font-semibold truncate",children:r.foodBrand||"N/A"})]}),e.jsxs("div",{className:"p-4 bg-muted/50 rounded-lg",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Créditos"}),e.jsxs("p",{className:"text-lg font-semibold",children:[u||0," dias"]})]})]})]}),r.notes&&e.jsxs("div",{className:"mt-6 p-4 bg-muted/30 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Observações:"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:r.notes})]})]})}),e.jsxs(Fe,{value:n,onValueChange:s,children:[e.jsxs(_e,{className:"grid w-full grid-cols-6",children:[e.jsx(W,{value:"overview",children:"Visão Geral"}),e.jsx(W,{value:"logs",children:"Logs Diários"}),e.jsx(W,{value:"health",children:"Saúde"}),e.jsx(W,{value:"gallery",children:"Galeria"}),e.jsx(W,{value:"documents",children:"Documentos"}),e.jsx(W,{value:"calendar",children:"Calendário"})]}),e.jsx(q,{value:"overview",className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(f,{children:[e.jsx(N,{children:e.jsxs(w,{className:"text-base flex items-center gap-2",children:[e.jsx(te,{className:"h-4 w-4"}),"Logs Recentes"]})}),e.jsxs(j,{children:[!d||d.length===0?e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Nenhum log registrado"}):e.jsx("div",{className:"space-y-3",children:d.slice(0,3).map(i=>e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(_,{variant:i.source==="daycare"?"default":"secondary",children:i.source==="daycare"?"Creche":"Casa"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(i.logDate).toLocaleDateString("pt-BR")})]}),i.mood&&e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"Humor:"})," ",i.mood]}),i.notes&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:i.notes})]},i.id))}),e.jsx(E,{href:`/tutor/pets/${t}/logs`,children:e.jsx(R,{variant:"outline",className:"w-full mt-4",children:"Ver Todos os Logs"})})]})]}),e.jsxs(f,{children:[e.jsx(N,{children:e.jsxs(w,{className:"text-base flex items-center gap-2",children:[e.jsx(Be,{className:"h-4 w-4"}),"Medicamentos Ativos"]})}),e.jsxs(j,{children:[!c||c.filter(i=>i.medication.isActive).length===0?e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Nenhum medicamento ativo"}):e.jsx("div",{className:"space-y-3",children:c.filter(i=>i.medication.isActive).slice(0,3).map(i=>e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsx("p",{className:"font-medium text-sm",children:i.medicationInfo.name}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Dosagem: ",i.medication.dosage]}),i.medication.frequency&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Frequência: ",i.medication.frequency]})]},i.medication.id))}),e.jsx(E,{href:`/tutor/pets/${t}/medications`,children:e.jsx(R,{variant:"outline",className:"w-full mt-4",children:"Gerenciar Medicamentos"})})]})]}),e.jsxs(f,{children:[e.jsx(N,{children:e.jsxs(w,{className:"text-base flex items-center gap-2",children:[e.jsx(oe,{className:"h-4 w-4"}),"Próximas Vacinas"]})}),e.jsxs(j,{children:[!o||o.length===0?e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Nenhuma vacina agendada"}):e.jsx("div",{className:"space-y-3",children:o.filter(i=>i.vaccination.nextDueDate&&new Date(i.vaccination.nextDueDate)>new Date).slice(0,3).map(i=>e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsx("p",{className:"font-medium text-sm",children:i.vaccine.name}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Próxima dose:"," ",i.vaccination.nextDueDate?new Date(i.vaccination.nextDueDate).toLocaleDateString("pt-BR"):"N/A"]})]},i.vaccination.id))}),e.jsx(E,{href:`/tutor/pets/${t}/vaccines`,children:e.jsx(R,{variant:"outline",className:"w-full mt-4",children:"Ver Carteira de Vacinação"})})]})]}),e.jsxs(f,{children:[e.jsx(N,{children:e.jsxs(w,{className:"text-base flex items-center gap-2",children:[e.jsx(te,{className:"h-4 w-4"}),"Documentos"]})}),e.jsxs(j,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsx("span",{className:"text-sm",children:"Total de documentos"}),e.jsx(_,{children:m?.length||0})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsx("span",{className:"text-sm",children:"Carteiras de vacinação"}),e.jsx(_,{children:m?.filter(i=>i.category==="vaccination_card").length||0})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsx("span",{className:"text-sm",children:"Exames"}),e.jsx(_,{children:m?.filter(i=>i.category==="exam").length||0})]})]}),e.jsx(E,{href:`/tutor/pets/${t}/documents`,children:e.jsx(R,{variant:"outline",className:"w-full mt-4",children:"Ver Todos os Documentos"})})]})]})]})}),e.jsx(q,{value:"logs",children:e.jsxs(f,{children:[e.jsxs(N,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(w,{children:"Logs Diários"}),e.jsx(E,{href:`/tutor/pets/${t}/logs/new`,children:e.jsxs(R,{children:[e.jsx(te,{className:"mr-2 h-4 w-4"}),"Novo Log"]})})]}),e.jsx(O,{children:"Registre informações diárias sobre o comportamento e saúde do seu pet"})]}),e.jsx(j,{children:!d||d.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx(te,{className:"empty-state-icon"}),e.jsx("p",{className:"empty-state-title",children:"Nenhum log registrado"}),e.jsx("p",{className:"empty-state-description",children:"Comece a registrar informações diárias do seu pet"})]}):e.jsx("div",{className:"space-y-4",children:d.map(i=>e.jsx(Ze,{log:i,petName:r.name,showSource:!0},i.id))})})]})}),e.jsxs(q,{value:"health",className:"space-y-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsx(xt,{petId:t}),e.jsx(jt,{petId:t})]}),e.jsx(vt,{petId:t})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(f,{children:[e.jsx(N,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(w,{className:"text-base",children:"Vacinas"}),e.jsx(E,{href:`/tutor/pets/${t}/vaccines`,children:e.jsx(R,{size:"sm",variant:"outline",children:"Ver Todas"})})]})}),e.jsx(j,{children:!o||o.length===0?e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Nenhuma vacina registrada"}):e.jsx("div",{className:"space-y-2",children:o.slice(0,5).map(i=>e.jsxs("div",{className:"flex items-center justify-between p-2 border rounded",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:i.vaccine.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Aplicada em: ",new Date(i.vaccination.applicationDate).toLocaleDateString("pt-BR")]})]}),i.vaccination.nextDueDate&&e.jsx(_,{variant:"outline",className:"text-xs",children:new Date(i.vaccination.nextDueDate).toLocaleDateString("pt-BR")})]},i.vaccination.id))})})]}),e.jsxs(f,{children:[e.jsx(N,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(w,{className:"text-base",children:"Medicamentos"}),e.jsx(E,{href:`/tutor/pets/${t}/medications`,children:e.jsx(R,{size:"sm",variant:"outline",children:"Ver Todos"})})]})}),e.jsx(j,{children:!c||c.length===0?e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Nenhum medicamento registrado"}):e.jsx("div",{className:"space-y-2",children:c.slice(0,5).map(i=>e.jsxs("div",{className:"flex items-center justify-between p-2 border rounded",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:i.medicationInfo.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Dosagem: ",i.medication.dosage]})]}),e.jsx(_,{variant:i.medication.isActive?"default":"secondary",children:i.medication.isActive?"Ativo":"Finalizado"})]},i.medication.id))})})]})]})]}),e.jsx(q,{value:"documents",className:"space-y-4",children:e.jsx(tt,{petId:t})}),e.jsx(q,{value:"gallery",className:"space-y-4",children:e.jsx(Je,{petId:t,canUpload:!0,canDelete:!1})}),e.jsxs(q,{value:"calendar",className:"space-y-4",children:[e.jsxs(f,{children:[e.jsxs(N,{children:[e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(oe,{className:"h-5 w-5"}),"Próximas Vacinas"]}),e.jsx(O,{children:"Vacinas agendadas para os próximos 30 dias"})]}),e.jsx(j,{children:!o||o.filter(i=>i.vaccination.nextDueDate&&new Date(i.vaccination.nextDueDate)>new Date&&new Date(i.vaccination.nextDueDate)<=new Date(Date.now()+720*60*60*1e3)).length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx(oe,{className:"empty-state-icon"}),e.jsx("p",{className:"empty-state-title",children:"Nenhuma vacina agendada"}),e.jsx("p",{className:"empty-state-description",children:"Todas as vacinas estão em dia"})]}):e.jsx("div",{className:"space-y-3",children:o?.filter(i=>i.vaccination.nextDueDate&&new Date(i.vaccination.nextDueDate)>new Date&&new Date(i.vaccination.nextDueDate)<=new Date(Date.now()+720*60*60*1e3)).map(i=>e.jsx("div",{className:"p-4 border rounded-lg",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:i.vaccine.name}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Próxima dose: ",new Date(i.vaccination.nextDueDate).toLocaleDateString("pt-BR")]})]}),e.jsxs(_,{variant:"outline",children:[Math.ceil((new Date(i.vaccination.nextDueDate).getTime()-Date.now())/(1e3*60*60*24))," dias"]})]})},i.vaccination.id))})})]}),e.jsxs(f,{children:[e.jsxs(N,{children:[e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(je,{className:"h-5 w-5"}),"Eventos do Calendário"]}),e.jsxs(O,{children:["Eventos relacionados ao ",r.name]})]}),e.jsx(j,{children:e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(je,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),e.jsxs("p",{children:["Acesse o ",e.jsx(E,{href:"/tutor/calendar",className:"text-primary hover:underline",children:"Calendário Completo"})," para visualizar todos os eventos"]})]})})]})]})]})]}),e.jsx(et,{variant:"floating",petName:r.name})]}):e.jsx(ne,{children:e.jsx(f,{children:e.jsxs(j,{className:"empty-state",children:[e.jsx(Te,{className:"empty-state-icon"}),e.jsx("p",{className:"empty-state-title",children:"Pet não encontrado"})]})})})}export{sa as default};
