import{r as L,u as R,t as x,a as N,j as e,B as c,o as q,A as B,p as E,q as I,s as F,v as P,h as d,I as l,w as H,C as h,b as p,d as j,i as O,e as f,f as u,n as k}from"./index-DG0yx2hi.js";import{A as z}from"./AdminLayout-CapzJ-JK.js";import{T as G,a as M,b as y,c as r,d as Q,e as n}from"./table-DeOYaLOA.js";import{B as g,S as D}from"./popover-Bqiz4euq.js";import{L as $}from"./list-76R1YwJ3.js";import{P as U}from"./plus-DIKUpKHa.js";import"./scroll-area-C0S6gB82.js";import"./index-BdQq_4o_.js";import"./layout-dashboard-CC4g-mOh.js";import"./wallet-CKmMh37E.js";import"./users-DD1qYPM2.js";import"./user-B4BzRHVK.js";function ne(){const[C,o]=L.useState(!1),[,T]=R(),{data:t,refetch:w}=x.vaccines.library.useQuery(),{data:i}=x.vaccines.upcoming.useQuery({daysAhead:30}),m=x.vaccines.addToLibrary.useMutation({onSuccess:()=>{N.success("Vacina adicionada √† biblioteca!"),o(!1),w()},onError:s=>{N.error("Erro: "+s.message)}}),V=s=>{s.preventDefault();const a=new FormData(s.currentTarget),A=a.get("name"),S=a.get("description"),b=a.get("intervalDays"),v=a.get("dosesRequired");m.mutate({name:A,description:S||void 0,intervalDays:b?parseInt(b):void 0,dosesRequired:v?parseInt(v):1})};return e.jsx(z,{children:e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Vacinas"}),e.jsx("p",{className:"text-muted-foreground",children:"Gerenciamento de vacinas e biblioteca"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(c,{variant:"outline",onClick:()=>T("/admin/vaccines-all"),children:[e.jsx($,{className:"mr-2 h-4 w-4"}),"Ver Todas as Vacinas"]}),e.jsxs(q,{open:C,onOpenChange:o,children:[e.jsx(B,{asChild:!0,children:e.jsxs(c,{children:[e.jsx(U,{className:"mr-2 h-4 w-4"}),"Nova Vacina"]})}),e.jsxs(E,{children:[e.jsxs(I,{children:[e.jsx(F,{children:"Adicionar Vacina √† Biblioteca"}),e.jsx(P,{children:"Crie uma nova vacina para uso na plataforma"})]}),e.jsxs("form",{onSubmit:V,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"name",children:"Nome da Vacina *"}),e.jsx(l,{id:"name",name:"name",placeholder:"Ex: V10, Antirr√°bica, Gripe Canina",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"description",children:"Descri√ß√£o"}),e.jsx(l,{id:"description",name:"description",placeholder:"Descri√ß√£o da vacina e prote√ß√£o"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"intervalDays",children:"Intervalo (dias)"}),e.jsx(l,{id:"intervalDays",name:"intervalDays",type:"number",min:"1",placeholder:"Ex: 21, 30, 365"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Dias entre doses"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"dosesRequired",children:"Doses Necess√°rias"}),e.jsx(l,{id:"dosesRequired",name:"dosesRequired",type:"number",min:"1",defaultValue:"1",placeholder:"Ex: 1, 2, 3"})]})]}),e.jsxs(H,{children:[e.jsx(c,{type:"button",variant:"outline",onClick:()=>o(!1),children:"Cancelar"}),e.jsx(c,{type:"submit",disabled:m.isPending,children:m.isPending?"Salvando...":"Salvar"})]})]})]})]})]})]}),i&&i.length>0&&e.jsxs(h,{className:"border-orange-200 bg-orange-50/50",children:[e.jsxs(p,{children:[e.jsxs(j,{className:"flex items-center gap-2 text-orange-700",children:[e.jsx(O,{className:"h-5 w-5"}),"Vacinas Pr√≥ximas (",i.length,")"]}),e.jsx(f,{children:"Vacinas agendadas para os pr√≥ximos 30 dias"})]}),e.jsx(u,{children:e.jsxs("div",{className:"space-y-3",children:[i.slice(0,5).map(s=>{const a=Math.ceil((new Date(s.vaccination.nextDueDate).getTime()-new Date().getTime())/864e5);return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border border-orange-200 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:s.pet.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.vaccine.name,s.vaccination.doseNumber&&` - Dose ${s.vaccination.doseNumber}`]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx(g,{className:"bg-orange-100 text-orange-700 border-orange-200",children:a===0?"Hoje":a===1?"Amanh√£":`${a} dias`}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:new Date(s.vaccination.nextDueDate).toLocaleDateString("pt-BR")})]})]},s.vaccination.id)}),i.length>5&&e.jsxs("p",{className:"text-sm text-center text-muted-foreground",children:["+ ",i.length-5," outras vacinas agendadas"]})]})})]}),e.jsxs(h,{children:[e.jsxs(p,{children:[e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-5 w-5"}),"Biblioteca de Vacinas"]}),e.jsxs(f,{children:[t?.length||0," vacinas cadastradas na biblioteca"]})]}),e.jsx(u,{children:!t||t.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx(D,{className:"empty-state-icon"}),e.jsx("p",{className:"empty-state-title",children:"Nenhuma vacina cadastrada"}),e.jsx("p",{className:"empty-state-description",children:"Adicione vacinas √† biblioteca para uso na plataforma"})]}):e.jsx("div",{className:"rounded-md border",children:e.jsxs(G,{children:[e.jsx(M,{children:e.jsxs(y,{children:[e.jsx(r,{children:"Nome"}),e.jsx(r,{children:"Descri√ß√£o"}),e.jsx(r,{children:"Intervalo"}),e.jsx(r,{children:"Doses"}),e.jsx(r,{children:"Status"})]})}),e.jsx(Q,{children:t.map(s=>e.jsxs(y,{children:[e.jsx(n,{className:"font-medium",children:s.name}),e.jsx(n,{className:"max-w-md",children:s.description||"-"}),e.jsx(n,{children:s.intervalDays?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{className:"h-4 w-4 text-muted-foreground"}),s.intervalDays," dias"]}):"-"}),e.jsx(n,{children:e.jsxs(g,{variant:"outline",children:[s.dosesRequired||1," dose(s)"]})}),e.jsx(n,{children:e.jsx(g,{className:s.isCommon?"bg-green-100 text-green-700 border-green-200":"bg-gray-100 text-gray-700 border-gray-200",children:s.isCommon?"Comum":"Personalizada"})})]},s.id))})]})})})]}),e.jsxs(h,{className:"bg-blue-50/50 border-blue-200",children:[e.jsx(p,{children:e.jsx(j,{className:"text-base",children:"üí° Sobre Vacinas"})}),e.jsxs(u,{className:"text-sm space-y-2",children:[e.jsx("p",{children:"‚Ä¢ Vacinas comuns s√£o pr√©-cadastradas no sistema"}),e.jsx("p",{children:"‚Ä¢ Adicione vacinas personalizadas conforme necess√°rio"}),e.jsx("p",{children:"‚Ä¢ O intervalo define o tempo entre doses"}),e.jsx("p",{children:"‚Ä¢ Tutores podem registrar vacinas aplicadas nos seus pets"}),e.jsx("p",{children:"‚Ä¢ Alertas autom√°ticos s√£o enviados para vacinas pr√≥ximas"})]})]})]})})}export{ne as default};
