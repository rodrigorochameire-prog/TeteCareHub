import{r as i,k as F,j as e,x as _,B as f,y as G,u as q,D as R,n as V,S as X,z as U,t as P,a as w,C as A,b as K,d as Q,e as Y,f as J,o as Z,p as ee,q as se,s as ae,v as re,w as te}from"./index-DG0yx2hi.js";import{F as oe,a as ne,U as ie,M as O,S as le,P as ce,D as de,b as me,A as S,c as D,d as ue,e as xe,L as he,B as ge}from"./popover-Bqiz4euq.js";import{S as pe,u as be,a as fe,b as ve,c as je,d as Ne,e as ye,f as E,g as H,P as we,h as Ce,i as Se,j as De,N as L,T as z}from"./NotificationBell-BIuiN9Fe.js";import{L as Me,D as Te}from"./layout-dashboard-CC4g-mOh.js";import{U as M}from"./users-DD1qYPM2.js";import{C as ke}from"./circle-check-big-DKLrYCYd.js";import{M as Pe}from"./message-square-COhalQ2E.js";import{C as I}from"./credit-card-CxD7Buqp.js";import{T as Ae}from"./textarea-BfRN5q_Y.js";import{C as Ee}from"./chevron-down-CKVtRMqG.js";import{C as He}from"./chevron-right-DecBlSPI.js";import{M as Le}from"./mail-DVbdA7bp.js";import{P as ze}from"./phone-DTR97RUp.js";import{S as Ie}from"./send-BU_qFC5s.js";import"./pt-BR-BIS3WgEC.js";import"./info-DReA-lTp.js";const C=[{label:"Gestão",color:"blue",items:[{icon:Me,label:"Dashboard",path:"/admin/dashboard"},{icon:R,label:"Pets",path:"/admin/pets"},{icon:M,label:"Tutores por Pet",path:"/admin/tutors-by-pet"},{icon:ke,label:"Aprovações",path:"/admin/pet-approval"},{icon:V,label:"Calendário Geral",path:"/admin/calendar"}]},{label:"Operação",color:"orange",items:[{icon:oe,label:"Logs Diários",path:"/admin/logs"},{icon:ne,label:"Comportamento",path:"/admin/behavior"},{icon:ie,label:"Ração",path:"/admin/food"},{icon:Pe,label:"Mural",path:"/admin/wall"},{icon:O,label:"Chat",path:"/admin/chat"}]},{label:"Saúde",color:"red",items:[{icon:le,label:"Vacinas",path:"/admin/vaccines"},{icon:ce,label:"Medicamentos",path:"/admin/medications"},{icon:X,label:"Preventivos",path:"/admin/preventives"}]},{label:"Financeiro",color:"green",items:[{icon:I,label:"Planos de Assinatura",path:"/admin/plans"},{icon:I,label:"Pacotes & Créditos",path:"/admin/credit-packages"},{icon:Te,label:"Finanças",path:"/admin/finances"}]},{label:"Notificações",color:"purple",items:[{icon:U,label:"Templates de Mensagens",path:"/admin/notification-templates"},{icon:M,label:"Preferências por Tutor",path:"/admin/tutor-notification-preferences"}]}],$e={blue:{icon:"text-cyan-600",iconHover:"group-hover:text-cyan-600",iconActive:"text-cyan-600",bg:"bg-cyan-50",bgHover:"hover:bg-cyan-50",bgActive:"bg-cyan-100",border:"border-cyan-200"},orange:{icon:"text-orange-600",iconHover:"group-hover:text-orange-600",iconActive:"text-orange-600",bg:"bg-orange-50",bgHover:"hover:bg-orange-50",bgActive:"bg-orange-100",border:"border-orange-200"},red:{icon:"text-red-600",iconHover:"group-hover:text-red-600",iconActive:"text-red-600",bg:"bg-red-50",bgHover:"hover:bg-red-50",bgActive:"bg-red-100",border:"border-red-200"},green:{icon:"text-green-600",iconHover:"group-hover:text-green-600",iconActive:"text-green-600",bg:"bg-green-50",bgHover:"hover:bg-green-50",bgActive:"bg-green-100",border:"border-green-200"},purple:{icon:"text-purple-600",iconHover:"group-hover:text-purple-600",iconActive:"text-purple-600",bg:"bg-purple-50",bgHover:"hover:bg-purple-50",bgActive:"bg-purple-100",border:"border-purple-200"}},$="sidebar-width",Be=280,Fe=240,Re=400;function B({children:b}){const[d,x]=i.useState(()=>{const l=localStorage.getItem($);return l?parseInt(l,10):Be}),{loading:m,user:t}=F();return i.useEffect(()=>{localStorage.setItem($,d.toString())},[d]),m?e.jsx(_,{}):t?e.jsx(pe,{defaultOpen:!1,style:{"--sidebar-width":`${d}px`},children:e.jsx(Ue,{setSidebarWidth:x,children:b})}):e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-background via-background to-accent/5",children:e.jsxs("div",{className:"flex flex-col items-center gap-8 p-8 max-w-md w-full",children:[e.jsxs("div",{className:"flex flex-col items-center gap-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-primary/20 blur-3xl rounded-full"}),e.jsx("img",{src:"/tetecare-logo.png",alt:"Tetê Care",className:"w-24 h-24 rounded-2xl object-cover relative shadow-2xl"})]}),e.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-center",children:"Acesse para continuar"}),e.jsx("p",{className:"text-sm text-muted-foreground text-center max-w-sm",children:"O acesso a este painel requer autenticação. Continue para fazer login."})]}),e.jsx(f,{onClick:()=>{window.location.href=G()},size:"lg",className:"w-full shadow-lg hover:shadow-xl transition-all",children:"Fazer Login"})]})})}function Ue({children:b,setSidebarWidth:d}){const{user:x,logout:m}=F(),[t,l]=q(),{state:h,toggleSidebar:N,setOpen:v}=be(),a=h==="collapsed",[g,j]=i.useState(!1),[T,k]=i.useState(!1),s=i.useRef(null),c=C.flatMap(o=>o.items).find(o=>o.path===t),r=fe();return i.useEffect(()=>{a&&j(!1)},[a]),i.useEffect(()=>{const o=u=>{if(!g)return;const p=s.current?.getBoundingClientRect().left??0,n=u.clientX-p;n>=Fe&&n<=Re&&d(n)},y=()=>{j(!1)};return g&&(document.addEventListener("mousemove",o),document.addEventListener("mouseup",y),document.body.style.cursor="col-resize",document.body.style.userSelect="none"),()=>{document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",y),document.body.style.cursor="",document.body.style.userSelect=""}},[g,d]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative",ref:s,children:[e.jsxs(ve,{collapsible:"icon",className:"border-r border-border/40 bg-gradient-to-b from-card/95 via-card to-card/90 backdrop-blur-xl shadow-xl ",disableTransition:g,children:[e.jsx(je,{className:"h-14 justify-center border-b border-border/20",children:e.jsx("div",{className:"flex items-center gap-3 px-6 transition-all w-full",children:!a&&e.jsx("div",{className:"flex flex-col",children:e.jsx("span",{className:"text-xs font-bold tracking-wider uppercase bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"Gestão"})})})}),e.jsx(Ne,{className:"px-3 py-2 overflow-y-auto flex-1",children:e.jsxs(ye,{className:a?"gap-0.5":"gap-2",children:[e.jsx(E,{children:e.jsxs(H,{onClick:N,tooltip:a?"Expandir Menu":"Recolher Menu",className:`${a?"h-9":"h-12"} hover:bg-primary/10 transition-all duration-300`,children:[e.jsx(we,{className:"h-6 w-6 text-muted-foreground group-hover:text-primary transition-colors"}),e.jsx("span",{className:"text-sm font-medium text-muted-foreground group-hover:text-foreground",children:a?"Expandir Menu":"Recolher Menu"})]})}),e.jsx("div",{className:"h-px bg-border/40 my-2"}),C.map((o,y)=>e.jsxs("div",{children:[!a&&e.jsx("div",{className:"px-3 py-2 mt-4 mb-2",children:e.jsx("span",{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground/70",children:o.label})}),o.items.map(u=>{const p=t===u.path,n=$e[o.color];return e.jsx(E,{children:e.jsxs(H,{isActive:p,onClick:W=>{W.stopPropagation(),l(u.path),r&&h==="expanded"&&v(!1)},tooltip:u.label,className:`${a?"h-9":"h-12"} transition-all duration-300 font-medium rounded-xl group relative overflow-hidden ${p?`${n.bgActive} shadow-lg ring-2 ${n.border}`:`${n.bgHover} text-muted-foreground hover:text-foreground hover:shadow-md`}`,children:[p&&e.jsx("div",{className:`absolute inset-0 ${n.bg} opacity-50 animate-pulse`}),e.jsx(u.icon,{className:`h-6 w-6 relative z-10 transition-all duration-300 ${p?`${n.iconActive} drop-shadow-md`:`${n.iconHover} group-hover:scale-110`}`}),e.jsx("span",{className:"relative z-10 font-semibold",children:u.label}),p&&!a&&e.jsx("div",{className:`ml-auto w-2 h-2 rounded-full ${n.iconActive} animate-pulse shadow-lg`})]})},u.path)}),y<C.length-1&&e.jsx("div",{className:`h-px bg-border/20 mx-3 ${a?"my-1":"my-3"}`})]},o.label))]})}),e.jsx(Ce,{className:"p-3 border-t border-border/40 bg-gradient-to-t from-primary/5 to-transparent",children:e.jsxs(de,{children:[e.jsx(me,{asChild:!0,children:e.jsxs("button",{className:"flex items-center gap-3 rounded-xl px-3 py-3 hover:bg-gradient-to-r hover:from-primary/10 hover:to-primary/5 transition-all duration-300 w-full text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/50 group shadow-sm hover:shadow-md",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/30 to-primary/10 blur-lg rounded-full"}),e.jsx(S,{className:"h-11 w-11 border-2 border-primary/30 shadow-lg relative ring-2 ring-background",children:e.jsx(D,{className:"text-sm font-bold bg-gradient-to-br from-primary/25 to-accent/15 text-primary",children:x?.name?.charAt(0).toUpperCase()})})]}),!a&&e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-bold truncate leading-none text-foreground",children:x?.name||"-"}),e.jsx("p",{className:"text-xs text-muted-foreground truncate mt-1.5 font-medium",children:x?.email||"-"})]})]})}),e.jsx(ue,{align:"end",className:"w-56 shadow-2xl border-border/40",children:e.jsxs(xe,{onClick:m,className:"cursor-pointer text-destructive focus:text-destructive font-semibold",children:[e.jsx(he,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Sair"})]})})]})})]}),e.jsx("div",{className:`absolute top-0 right-0 w-1.5 h-full cursor-col-resize hover:bg-gradient-to-b hover:from-primary/40 hover:via-accent/30 hover:to-primary/40 transition-all duration-300 ${a?"hidden":""}`,onMouseDown:()=>{a||j(!0)},style:{zIndex:50}})]}),e.jsxs(Se,{className:"ml-0",children:[r&&e.jsxs("div",{className:"flex border-b border-border/40 h-16 items-center justify-between bg-background/95 backdrop-blur-xl px-4 sticky top-0 z-40 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(De,{className:"h-10 w-10 rounded-xl bg-accent/50 hover:bg-primary/20 transition-colors"}),e.jsxs("button",{onClick:()=>l("/admin/dashboard"),className:"flex items-center gap-2 hover:opacity-80 transition-opacity",children:[e.jsx("img",{src:"/tetecare-logo.png",alt:"Tetê Care",className:"w-8 h-8 rounded-lg object-cover shadow-sm"}),e.jsx("span",{className:"font-semibold text-sm",children:c?.label??"Menu"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{}),e.jsx(z,{})]})]}),!r&&e.jsxs("div",{className:"flex border-b border-border/40 h-16 items-center justify-center bg-background/95 backdrop-blur-xl px-6 sticky top-0 z-40 gap-3 shadow-sm relative",children:[e.jsxs("button",{onClick:()=>l("/admin/dashboard"),className:"flex items-center gap-3 hover:opacity-80 transition-opacity cursor-pointer",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/20 to-primary/5 blur-xl rounded-full"}),e.jsx("img",{src:"/tetecare-logo.png",alt:"Tetê Care",className:"w-11 h-11 rounded-xl object-cover relative shadow-lg ring-2 ring-black/80 dark:ring-black/90"})]}),e.jsx("span",{className:"text-2xl font-semibold tracking-tight text-foreground",style:{fontFamily:'"Inter", "SF Pro Display", system-ui, sans-serif'},children:"Tetê Care"})]}),e.jsxs("div",{className:"flex items-center gap-3 absolute right-6",children:[e.jsx(L,{}),e.jsx(z,{})]})]}),e.jsx("main",{className:"flex-1 p-6 md:p-8",children:b})]})]})}function ts(){const[b,d]=i.useState(new Set),[x,m]=i.useState(!1),[t,l]=i.useState(null),[h,N]=i.useState(""),{data:v,isLoading:a}=P.tutors.getPetsWithTutors.useQuery(),g=P.tutors.notifyPetTutors.useMutation({onSuccess:()=>{w.success("Notificações enviadas com sucesso!"),m(!1),N(""),l(null)},onError:s=>{w.error(`Erro ao enviar notificações: ${s.message}`)}}),j=s=>{const c=new Set(b);c.has(s)?c.delete(s):c.add(s),d(c)},T=s=>{l(s),m(!0)},k=()=>{if(!t||!h.trim()){w.error("Digite uma mensagem para enviar");return}g.mutate({petId:t.id,title:`Atualização sobre ${t.name}`,message:h})};return a?e.jsx(B,{children:e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})}):e.jsxs(B,{children:[e.jsxs("div",{className:"container py-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(M,{className:"h-8 w-8 text-primary"}),"Tutores por Pet"]}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Visualize e gerencie tutores agrupados por pet"})]}),e.jsx("div",{className:"space-y-4",children:!v||v.length===0?e.jsxs(A,{className:"p-12 text-center",children:[e.jsx(R,{className:"h-16 w-16 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Nenhum pet cadastrado ainda"})]}):v.map(s=>{const c=b.has(s.id);return e.jsxs(A,{children:[e.jsx(K,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(f,{variant:"ghost",size:"sm",onClick:()=>j(s.id),className:"p-0 h-8 w-8",children:c?e.jsx(Ee,{className:"h-5 w-5"}):e.jsx(He,{className:"h-5 w-5"})}),e.jsx(S,{className:"h-12 w-12 bg-primary/10",children:e.jsx(D,{className:"text-primary font-bold",children:s.name.substring(0,2).toUpperCase()})}),e.jsxs("div",{children:[e.jsx(Q,{className:"text-xl",children:s.name}),e.jsxs(Y,{children:[s.breed," • ",s.tutorCount," ",s.tutorCount===1?"tutor":"tutores"]})]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(f,{variant:"outline",size:"sm",onClick:()=>T(s),disabled:s.tutorCount===0,children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),"Notificar Todos"]})})]})}),c&&s.tutors&&s.tutors.length>0&&e.jsx(J,{children:e.jsx("div",{className:"space-y-3",children:s.tutors.map(r=>e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border bg-muted/30",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(S,{className:"h-10 w-10 bg-orange-100",children:e.jsx(D,{className:"text-orange-600 font-semibold",children:r.tutorName?.charAt(0)||"T"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-medium",children:r.tutorName}),r.isPrimary&&e.jsx(ge,{variant:"default",className:"text-xs",children:"Principal"})]}),e.jsxs("div",{className:"flex items-center gap-3 text-sm text-muted-foreground",children:[r.tutorEmail&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Le,{className:"h-3 w-3"}),r.tutorEmail]}),r.tutorPhone&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ze,{className:"h-3 w-3"}),r.tutorPhone]})]})]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsx(f,{variant:"ghost",size:"sm",children:e.jsx(O,{className:"h-4 w-4"})})})]},r.tutorId))})})]},s.id)})})]}),e.jsx(Z,{open:x,onOpenChange:m,children:e.jsxs(ee,{children:[e.jsxs(se,{children:[e.jsxs(ae,{children:["Notificar Tutores de ",t?.name]}),e.jsxs(re,{children:["Envie uma notificação para todos os tutores deste pet (",t?.tutorCount," ",t?.tutorCount===1?"tutor":"tutores",")"]})]}),e.jsx("div",{className:"space-y-4",children:e.jsx(Ae,{placeholder:"Digite a mensagem da notificação...",value:h,onChange:s=>N(s.target.value),className:"min-h-[120px]"})}),e.jsxs(te,{children:[e.jsx(f,{variant:"outline",onClick:()=>m(!1),children:"Cancelar"}),e.jsxs(f,{onClick:k,disabled:g.isPending||!h.trim(),children:[e.jsx(Ie,{className:"h-4 w-4 mr-2"}),"Enviar Notificações"]})]})]})})]})}export{ts as default};
