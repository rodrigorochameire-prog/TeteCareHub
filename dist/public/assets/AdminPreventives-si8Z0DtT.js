import{r as v,u as M,t as f,a as g,j as e,B as j,o as R,A as W,p as G,q as Q,s as Z,v as z,h as i,I as o,w as J,C as l,f as d,S as K,b as y,d as N,e as b}from"./index-DG0yx2hi.js";import{A as U}from"./AdminLayout-CapzJ-JK.js";import{S as X,a as Y,b as _,c as $,d as D}from"./select-k5kl2mY3.js";import{T as P,a as S,b as c,c as a,d as T,e as r}from"./table-DeOYaLOA.js";import{B as w}from"./popover-Bqiz4euq.js";import{L as ee}from"./list-76R1YwJ3.js";import{P as se}from"./plus-DIKUpKHa.js";import{B as C}from"./bug-Q7u3vQpS.js";import{W as A}from"./worm-BunGZuKV.js";import"./scroll-area-C0S6gB82.js";import"./index-BdQq_4o_.js";import"./layout-dashboard-CC4g-mOh.js";import"./wallet-CKmMh37E.js";import"./users-DD1qYPM2.js";import"./user-B4BzRHVK.js";import"./index-r4-iOF84.js";import"./chevron-down-CKVtRMqG.js";import"./check-DDByOptX.js";function ye(){const[F,u]=v.useState(!1),[I,B]=v.useState(""),[,E]=M(),{data:t,refetch:L}=f.preventives?.library?.useQuery()||{data:[],refetch:()=>{}},m=f.preventives?.addToLibrary?.useMutation({onSuccess:()=>{g.success("Produto preventivo adicionado à biblioteca!"),u(!1),L()},onError:s=>{g.error("Erro: "+s.message)}})||{mutate:()=>{},isPending:!1},O=s=>{s.preventDefault();const n=new FormData(s.currentTarget),V=n.get("name"),H=n.get("type"),q=n.get("manufacturer"),p=n.get("intervalDays"),k=n.get("notes");m.mutate({name:V,type:H,manufacturer:q||void 0,intervalDays:p?parseInt(p):void 0,notes:k||void 0})},x=Array.isArray(t)?t.filter(s=>s.type==="flea"):[],h=Array.isArray(t)?t.filter(s=>s.type==="deworming"):[];return e.jsx(U,{children:e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Preventivos"}),e.jsx("p",{className:"text-muted-foreground",children:"Gerenciamento de produtos preventivos (antipulgas e vermífugos)"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(j,{variant:"outline",onClick:()=>E("/admin/preventives-all"),children:[e.jsx(ee,{className:"mr-2 h-4 w-4"}),"Ver Todos os Preventivos"]}),e.jsxs(R,{open:F,onOpenChange:u,children:[e.jsx(W,{asChild:!0,children:e.jsxs(j,{children:[e.jsx(se,{className:"mr-2 h-4 w-4"}),"Novo Produto"]})}),e.jsxs(G,{children:[e.jsxs(Q,{children:[e.jsx(Z,{children:"Adicionar Produto Preventivo"}),e.jsx(z,{children:"Cadastre um novo produto para uso na plataforma"})]}),e.jsxs("form",{onSubmit:O,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"name",children:"Nome do Produto *"}),e.jsx(o,{id:"name",name:"name",placeholder:"Ex: Bravecto, Simparic, Drontal",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"type",children:"Tipo *"}),e.jsxs(X,{name:"type",value:I,onValueChange:B,required:!0,children:[e.jsx(Y,{children:e.jsx(_,{placeholder:"Selecione o tipo"})}),e.jsxs($,{children:[e.jsx(D,{value:"flea",children:"Antipulgas"}),e.jsx(D,{value:"deworming",children:"Vermífugo"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"manufacturer",children:"Fabricante"}),e.jsx(o,{id:"manufacturer",name:"manufacturer",placeholder:"Ex: MSD, Zoetis, Elanco"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"intervalDays",children:"Intervalo Padrão (dias)"}),e.jsx(o,{id:"intervalDays",name:"intervalDays",type:"number",placeholder:"Ex: 30, 90"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"notes",children:"Observações"}),e.jsx(o,{id:"notes",name:"notes",placeholder:"Informações adicionais"})]}),e.jsx(J,{children:e.jsx(j,{type:"submit",disabled:m.isPending,children:m.isPending?"Salvando...":"Salvar"})})]})]})]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsx(l,{children:e.jsx(d,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total de Produtos"}),e.jsx("p",{className:"text-3xl font-bold",children:Array.isArray(t)?t.length:0})]}),e.jsx(K,{className:"h-10 w-10 text-primary"})]})})}),e.jsx(l,{children:e.jsx(d,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Antipulgas"}),e.jsx("p",{className:"text-3xl font-bold text-orange-600",children:x.length})]}),e.jsx(C,{className:"h-10 w-10 text-orange-600"})]})})}),e.jsx(l,{children:e.jsx(d,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Vermífugos"}),e.jsx("p",{className:"text-3xl font-bold text-purple-600",children:h.length})]}),e.jsx(A,{className:"h-10 w-10 text-purple-600"})]})})})]}),e.jsxs(l,{children:[e.jsxs(y,{children:[e.jsxs(N,{className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-5 w-5 text-orange-600"}),"Antipulgas"]}),e.jsx(b,{children:"Produtos para controle de pulgas e carrapatos"})]}),e.jsx(d,{children:x.length===0?e.jsx("p",{className:"text-center text-muted-foreground py-8",children:"Nenhum produto antipulgas cadastrado"}):e.jsxs(P,{children:[e.jsx(S,{children:e.jsxs(c,{children:[e.jsx(a,{children:"Nome"}),e.jsx(a,{children:"Fabricante"}),e.jsx(a,{children:"Intervalo Padrão"}),e.jsx(a,{children:"Observações"})]})}),e.jsx(T,{children:x.map(s=>e.jsxs(c,{children:[e.jsx(r,{className:"font-medium",children:s.name}),e.jsx(r,{children:s.manufacturer||"-"}),e.jsx(r,{children:s.intervalDays?e.jsxs(w,{variant:"outline",children:[s.intervalDays," dias"]}):"-"}),e.jsx(r,{className:"text-sm text-muted-foreground",children:s.notes||"-"})]},s.id))})]})})]}),e.jsxs(l,{children:[e.jsxs(y,{children:[e.jsxs(N,{className:"flex items-center gap-2",children:[e.jsx(A,{className:"h-5 w-5 text-purple-600"}),"Vermífugos"]}),e.jsx(b,{children:"Produtos para controle de vermes e parasitas intestinais"})]}),e.jsx(d,{children:h.length===0?e.jsx("p",{className:"text-center text-muted-foreground py-8",children:"Nenhum vermífugo cadastrado"}):e.jsxs(P,{children:[e.jsx(S,{children:e.jsxs(c,{children:[e.jsx(a,{children:"Nome"}),e.jsx(a,{children:"Fabricante"}),e.jsx(a,{children:"Intervalo Padrão"}),e.jsx(a,{children:"Observações"})]})}),e.jsx(T,{children:h.map(s=>e.jsxs(c,{children:[e.jsx(r,{className:"font-medium",children:s.name}),e.jsx(r,{children:s.manufacturer||"-"}),e.jsx(r,{children:s.intervalDays?e.jsxs(w,{variant:"outline",children:[s.intervalDays," dias"]}):"-"}),e.jsx(r,{className:"text-sm text-muted-foreground",children:s.notes||"-"})]},s.id))})]})})]})]})})}export{ye as default};
